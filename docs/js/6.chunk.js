(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[6],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(8),o=n(58),r=n(61),s=n(59),i=n(65),m=n(14),u=n(55),d=n(56),f=function(){var e=Object(o.a)((function(e){return[e.theme,e.setTheme]})),t=e.theme,n=e.setTheme;return c.a.createElement("span",{onClick:function(){n("dark"===t?"light":"dark")}},"light"===t?c.a.createElement(u.a,{icon:d.k}):c.a.createElement(u.a,{icon:d.i}))},v=n(60),p=n(9),E=n.n(p),_=n(98),h=n.n(_),b=function(e){var t=e.visible,n=e.title,l=e.wrapperClassName,o=e.maskCloseable,r=void 0===o||o,s=e.onClose,i=e.children;Object(v.a)(e,["visible","title","wrapperClassName","maskCloseable","onClose","children"]);Object(a.useEffect)((function(){if(t?(m("add"),document.body.style.overflowY="hidden"):(m("remove"),document.body.style.overflowY=""),r){var e=function e(){setTimeout((function(){return s()}),0),window.removeEventListener("click",e)};t?window.addEventListener("click",e):window.removeEventListener("click",e)}return function(){m("remove"),document.body.style.overflowY=""}}),[t]);var m=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},f="".concat(h.a.content," ").concat(t?h.a.show:"");return t?E.a.createPortal(c.a.createElement((function(){return c.a.createElement("div",{className:h.a.modal},c.a.createElement("div",{className:"".concat(h.a.wrapper," ").concat(l||""),onClick:function(e){return e.stopPropagation()}},c.a.createElement("section",{className:h.a.title},c.a.createElement("span",null,n),c.a.createElement(u.a,{className:h.a.close,icon:d.m,onClick:s})),c.a.createElement("section",{className:f},i)))}),null),document.body):null},w=n(97),y=n.n(w),N=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(!1),l=Object(m.a)(n,2),o=l[0],s=l[1],i=Object(a.useState)(!1),v=Object(m.a)(i,2),p=v[0],E=v[1],_=Object(r.a)((function(e){return[e.clearCache,e.noteList,e.updateNoteList]})),h=_.clearCache,w=_.noteList,N=_.updateNoteList,g=function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0],a=new FileReader;a.readAsText(n),a.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;try{var a=JSON.parse(n||"");if(!a||0===a.length||!Array.isArray(a))return;var c=a[0];Object.keys(c).some((function(e){return!c[e]}))||N(a)}catch(l){console.error("\u5bfc\u5165\u6587\u4ef6\u5931\u8d25\uff01",l),alert("\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e\uff01")}}};return c.a.createElement("div",{className:y.a["home-tools"]},c.a.createElement(f,null),c.a.createElement(u.a,{className:y.a.setting,icon:d.e,onClick:function(e){e.stopPropagation(),s(!0)}}),c.a.createElement(b,{visible:o,title:"\u8bbe\u7f6e",wrapperClassName:y.a.wrapper,onClose:function(){return s(!1)}},c.a.createElement("section",{className:y.a.content},c.a.createElement("div",{className:y.a.item,onClick:function(e){e.stopPropagation(),h(),setTimeout((function(){alert("\u7f13\u5b58\u6e05\u7406\u6210\u529f\uff01"),s(!1)}),0)}},"\u6e05\u7f13\u5b58"),c.a.createElement("div",{className:y.a.item,onClick:function(t){if(t.stopPropagation(),!p){E(!0);var n=window.URL,a=new Blob([JSON.stringify(w)],{type:"application/json"});e.current.href=n.createObjectURL(a),setTimeout((function(){e.current.click(),E(!1),s(!1)}),0)}}},c.a.createElement("a",{ref:e,href:"href",download:"md-note\u5907\u4efd.json",hidden:!0}),"\u5bfc\u51fa\u5230\u6587\u4ef6(*.josn) ",p?"...":""),c.a.createElement("div",{className:y.a.item,onClick:function(e){var n,a;e.stopPropagation(),null===(n=t.current)||void 0===n||n.addEventListener("change",g),null===(a=t.current)||void 0===a||a.click()}},c.a.createElement("input",{ref:t,type:"file",accept:"application/json",hidden:!0}),"\u4ece\u6587\u4ef6\u5bfc\u5165(*.json)"))))},g=n(70),k=n(67),j=n.n(k);t.default=function(e){var t,n=Object(r.a)(),m=n.loading,u=n.noteList,d=Object(s.a)().scrollTop,f=Object(o.a)((function(e){return[e.stickyRightStyle]})).stickyRightStyle;Object(a.useEffect)((function(){v()}),[]);var v=function(){var t=e.scrollRestore();setTimeout((function(){document.body.scrollTop=t||0,document.documentElement.scrollTop=t||0}),0)},p=function(){e.beforeRouteLeave(d,{})},E=Object(a.useMemo)((function(){return d>window.innerHeight}),[d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{className:j.a.header},c.a.createElement("div",{className:"center-content content"},c.a.createElement("div",null,"MD-NOTE\uff1a",c.a.createElement("span",{className:j.a.desc},"\u4e00\u4e2a\u4f7f\u7528 markdown \u7684\u7b80\u6613\u535a\u5ba2")),c.a.createElement(N,null))),c.a.createElement("main",{className:"center-content ".concat(j.a["note-list"])},c.a.createElement("section",{id:m?j.a.skeleton:"",className:j.a.container},(null===u||void 0===u?void 0:u.length)>0?c.a.createElement(c.a.Fragment,null,null===u||void 0===u||null===(t=u.map)||void 0===t?void 0:t.call(u,(function(e){return c.a.createElement(l.Link,{to:"/detail/".concat(e.tag,"/").concat(e.name),className:"link ".concat(j.a.item),key:"".concat(e.tag,"-").concat(e.name),onClick:p},c.a.createElement("div",{className:j.a.title},e.title),c.a.createElement("div",{className:j.a.desc},c.a.createElement("span",{className:j.a.tag},"\u6807\u7b7e\uff1a",c.a.createElement("span",null,e.tag)),c.a.createElement("span",{className:j.a.time},"\u521b\u5efa\u65f6\u95f4\uff1a",e.create_time)))})),c.a.createElement((function(){return c.a.createElement("div",{className:j.a["reach-bottom"]},c.a.createElement("span",null,"\u5230\u5e95\u4e86"))}),null)):c.a.createElement("div",null,"\u6ca1\u6709\u6570\u636e")),E&&c.a.createElement(g.a,{position:f})))}},97:function(e,t,n){e.exports={"home-tools":"styles_home-tools__1PwEE",setting:"styles_setting__3HoBT",wrapper:"styles_wrapper__1GlOL",content:"styles_content__WjJal",item:"styles_item__2tqI9",show:"styles_show__mWgv2"}},98:function(e,t,n){e.exports={modal:"styles_modal__1Ub6-",wrapper:"styles_wrapper__1oBPs",show:"styles_show__1lTom",title:"styles_title__34foz","svg-inline--fa":"styles_svg-inline--fa__X3lto",content:"styles_content__N3_8d"}}}]);