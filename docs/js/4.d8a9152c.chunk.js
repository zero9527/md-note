(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[4],{76:function(e,t,n){e.exports={"note-detail":"note-detail_note-detail__300Me"}},79:function(e,t,n){e.exports={catalog:"mdCatalog_catalog__3r75B",bg:"mdCatalog_bg__3VFDw",catelist:"mdCatalog_catelist__VMStr",head:"mdCatalog_head__3D1zK",desc:"mdCatalog_desc__2yoDB","cate-content":"mdCatalog_cate-content__2W5XA","cate-item":"mdCatalog_cate-item__3f3Dt",active:"mdCatalog_active__KtXHX","cate-show":"mdCatalog_cate-show__vLLRv"}},80:function(e,t,n){e.exports={export:"export_export__aMcjj",tools:"export_tools__2Eo1y","export-a":"export_export-a__37G93",toggle:"export_toggle__2iKaM"}},82:function(e,t,n){e.exports={"pic-preview":"index_pic-preview__1b7eL",content:"index_content__NRfaT",close:"index_close__28ht6",loading:"index_loading__gupw7","img-content":"index_img-content__3wpFr",text:"index_text__teOB-"}},83:function(e,t,n){e.exports={scroll2top:"scroll2top_scroll2top__2nPN3"}},98:function(e,t,n){"use strict";n.r(t);var a=n(58),c=n.n(a),o=n(59),r=n(13),i=n(0),l=n.n(i),s=n(3),u=n(55),d=n(56),m=n(57),f=n(4),v=n(83),b=n.n(v),p=function(e){var t=e.position;return l.a.createElement("div",{className:"gitter"},l.a.createElement("div",{style:t,className:"btn ".concat(b.a.scroll2top),onClick:function(){var e=document.querySelector("#md-note");null===e||void 0===e||e.scrollIntoView()}},l.a.createElement(u.a,{icon:d.a})))},E=n(61),h=n(67),w=n(62),g=n(9),_=n.n(g),O=n(79),j=n.n(O),x=function(e){var t=e.mdtext,n=e.position,a=e.defaultActive,c=e.onCateClick,o=Object(w.a)(e,["mdtext","position","defaultActive","onCateClick"]),s=Object(i.useState)(!1),m=Object(r.a)(s,2),f=m[0],v=m[1],b=Object(i.useState)([]),p=Object(r.a)(b,2),E=p[0],h=p[1],g=Object(i.useState)(""),O=Object(r.a)(g,2),x=O[0],y=O[1],N=Object(i.useState)(""),k=Object(r.a)(N,2),C=k[0],L=k[1];Object(i.useEffect)((function(){C&&(document.title+="|".concat(C))}),[C]),Object(i.useEffect)((function(){a&&y(a)}),[a]),Object(i.useEffect)((function(){return S(),function(){I()}}),[]),Object(i.useEffect)((function(){function e(){f&&(window.innerWidth<1100&&(document.body.style.overflowY="auto"),v(!1),M("remove"))}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[f]),Object(i.useEffect)((function(){f?(document.body.style.overflowY="hidden",B(),T()):document.body.style.overflowY="auto",a&&B()}),[f,a]);var S=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);L(t.slice(0,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var r={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),o.length>0&&(r.child=o,e=e.concat(o.map((function(e){return e.id})))),n.push(r)})),h((function(){return n.filter((function(e){return Boolean(e.id)}))}))},B=function(){var e=document.getElementById("catelog-".concat(a));null===e||void 0===e||e.scrollIntoView()},I=function(){return window.removeEventListener("click",P)},T=function(){return window.addEventListener("click",P)},P=function(){v(!1),I(),M("remove")},M=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},R=function(e){var t="".concat(j.a["cate-item"]," ").concat(x===e.id?j.a.active:"");return l.a.createElement("div",{"data-id":e.id,id:e.header,className:t,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),y(e.id),null===c||void 0===c||c(e.id),setTimeout((function(){return v(!1)}),0)}(e)}},e.label)},W=Object(i.useMemo)((function(){return f?j.a["cate-show"]:""}),[f]);return _.a.createPortal(l.a.createElement("div",{id:"catalog",className:j.a.catalog,style:n},l.a.createElement(u.a,{className:"btn",icon:d.f,onClick:function(){M("add"),setTimeout((function(){return v(!0)}),0)}}),l.a.createElement("div",{className:j.a.bg,style:{display:f?"block":"none"}}),l.a.createElement("div",{className:"".concat(j.a.catelist," ").concat(W)},l.a.createElement("section",{className:j.a.head,title:C},"\u76ee\u5f55: ",C),l.a.createElement("section",{className:j.a["cate-content"]},E.length>0?E.map((function(e){var t,n;return l.a.createElement("ul",{key:e.id},R(e),e.child&&(null===(t=e.child)||void 0===t?void 0:t.length)>0&&(null===(n=e.child)||void 0===n?void 0:n.map((function(e){return l.a.createElement("ul",{key:e.id},R(e))}))))})):l.a.createElement((function(){return l.a.createElement("div",{className:j.a.desc},l.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),l.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),l.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children),document.body)},y=n(66),N=n(82),k=n.n(N),C=function(e){var t=e.show,n=e.src,a=e.alt,c=e.onClode;return Object(i.useEffect)((function(){var e=document.querySelector("#md-note"),n=document.querySelector("#catalog");return t?(e.classList.add("blur"),n.classList.add("blur"),document.body.style.overflowY="hidden"):(e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""),function(){e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""}}),[t]),_.a.createPortal(l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("section",{className:k.a["pic-preview"]},l.a.createElement("div",{className:k.a.content},l.a.createElement("button",{className:"btn ".concat(k.a.close),onClick:c},"X"),l.a.createElement("div",{className:k.a["img-content"]},n?l.a.createElement("img",{src:n,alt:a}):l.a.createElement("span",{className:k.a.loading},"\u6b63\u5728\u751f\u6210\u622a\u56fe\u3002\u3002\u3002")),l.a.createElement("div",{className:k.a.text},"\u5bfc\u51fa\u56fe\u7247\u9884\u89c8\uff0c\u53f3\u952e\u53e6\u5b58/\u957f\u6309\u4fdd\u5b58\uff01")))),document.body)},L=n(80),S=n.n(L),B=n(64);var I=function(e){e.id,e.position;var t=e.mdtext,a=Object(w.a)(e,["id","position","mdtext"]),s=Object(m.a)((function(e){return[e.theme]})).theme,f=Object(i.useState)(""),v=Object(r.a)(f,2),b=v[0],p=v[1],E=Object(i.useState)(""),h=Object(r.a)(E,2),g=h[0],_=h[1],O=Object(i.useState)(""),j=Object(r.a)(O,2),x=j[0],N=j[1],k=Object(i.useState)(!1),L=Object(r.a)(k,2),I=L[0],T=L[1],P=Object(i.useState)(!1),M=Object(r.a)(P,2),R=M[0],W=M[1],Y=Object(i.useState)(!1),z=Object(r.a)(Y,2),q=z[0],A=z[1],D=Object(i.useState)(!1),F=Object(r.a)(D,2),V=F[0],X=F[1];Object(i.useEffect)((function(){var e=t.substring(0,t.indexOf("\n")).split("# ")[1];N(e||"\u5bfc\u51fa")}),[]),Object(i.useEffect)((function(){function e(){!I&&window.innerWidth>=1100&&(T(!0),W(!1)),window.innerWidth<1100&&(T(!1),W(!0))}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var U=function(e,t){var a=t+50;e.style.width=a+"px",setTimeout(Object(o.a)(c.a.mark((function t(){var o,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={scale:1,x:0,y:0,scrollX:0,scrollY:0,width:a,useCORS:!0,backgroundColor:"dark"===s?"#232426":"#fff"},R||(o.windowWidth=a),t.next=4,Promise.resolve().then(n.t.bind(null,54,7));case 4:r=t.sent,(0,r.default)(e,o).then((function(t){p((function(){return t.toDataURL("image/png")})),e.style.width="auto"}));case 7:case"end":return t.stop()}}),t)}))),100)},H=function e(){setTimeout((function(){return T(!1)}),0),window.removeEventListener("click",e)},K=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:g,className:"export-md",download:"".concat(x,".md"),hidden:!0},"\u5bfc\u51famd\u6587\u4ef6"),l.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),e.nativeEvent.stopPropagation(),!V){X(!0);var n=window.URL,a=new Blob([t],{type:"application/text"});_(n.createObjectURL(a)),setTimeout((function(){var e;null===(e=document.querySelector(".export-md"))||void 0===e||e.click(),X(!1)}),0)}}(e)}},"\u5bfc\u51famd\u6587\u4ef6",V?"...":""),l.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),!q){T(!1),A(!0);var t=document.getElementById("md-content"),n=0,a=null===t||void 0===t?void 0:t.querySelectorAll("pre>code");if(a){var c=Array.from(a).map((function(e){return e.offsetWidth}));n=Math.max.apply(Math,Object(y.a)(c)),console.log("maxCodeWidth: ",n),U(t,n)}}}(e)}},"\u5bfc\u51fa\u56fe\u7247"),a.children)};return l.a.createElement("div",{className:S.a.export},l.a.createElement("button",{className:"btn ".concat(S.a.toggle),onClick:function(){T(!I),setTimeout((function(){I?window.removeEventListener("click",H):window.addEventListener("click",H)}),0)}},l.a.createElement(u.a,{icon:d.j})),R?l.a.createElement(B.a,{title:"",visible:I,onClose:function(){return T(!1)}},l.a.createElement("div",{className:S.a.tools},K())):l.a.createElement("div",{className:S.a.tools},K()),l.a.createElement(C,{show:q,src:b,alt:"".concat(x,".png"),onClode:function(){A(!1),p("")}}))},T=n(76),P=n.n(T);t.default=function(){Object(m.a)((function(e){return[e.theme]})).theme;var e=Object(E.a)((function(e){return[e.getNoteById,e.updateNoteById,e.fetchNoteById]})),t=e.getNoteById,n=e.updateNoteById,a=e.fetchNoteById,v=Object(s.useParams)(),b=v.tag,w=v.tid,g=Object(s.useHistory)(),_=Object(s.useLocation)(),O=Object(i.useState)(""),j=Object(r.a)(O,2),y=j[0],N=j[1],k=Object(i.useState)(!1),C=Object(r.a)(k,2),L=C[0],S=C[1],B=Object(i.useState)(),T=Object(r.a)(B,2),M=T[0],R=T[1],W=Object(i.useState)(),Y=Object(r.a)(W,2),z=Y[0],q=Y[1];Object(i.useEffect)((function(){return A(),function(){window.removeEventListener("resize",D),window.removeEventListener("scroll",V)}}),[]);var A=function(){var e=Object(o.a)(c.a.mark((function e(){var o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(),window.addEventListener("resize",D),window.addEventListener("scroll",V),!(null===(o=t(w))||void 0===o?void 0:o.data)){e.next=7;break}return N(o.data),e.abrupt("return");case 7:return e.prev=7,e.next=10,a(b,w);case 10:if(r=e.sent,console.log(r),0!==(null===r||void 0===r?void 0:r.code)){e.next=19;break}if(!r.data.substring(0,20).includes("<!DOCTYPE html>")){e.next=15;break}return e.abrupt("return");case 15:n(w,r.data),N(r.data),e.next=21;break;case 19:console.log("\u6570\u636e\u6ca1\u6709\u4e86\uff01"),N("");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=document.body.clientWidth,t=e>1100?{left:"".concat((e-1100)/2+800+20,"px")}:{right:"12px"};R(t)},F=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),q(e)}},V=function(){var e=document.body.scrollTop||document.documentElement.scrollTop;S((function(){return e>window.innerHeight}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{className:"border-1px-bottom header"},l.a.createElement("div",{className:"center-content back",onClick:function(){g.push("/")}},l.a.createElement(u.a,{icon:d.b}),"\xa0\u9996\u9875")),l.a.createElement("main",{className:"center-content ".concat(P.a["note-detail"])},y?l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{mdtext:y,onMdRendered:function(){var e=_.hash.substr(1,_.hash.length);setTimeout((function(){return F(decodeURI(e))}),0)}}),l.a.createElement(x,{mdtext:y,defaultActive:z,position:M,onCateClick:function(e){g.replace({pathname:_.pathname,hash:e})}},l.a.createElement(I,{id:w,position:M,mdtext:y},l.a.createElement("a",{href:"./#/md-editor/".concat(b,"/").concat(w),className:"link"},l.a.createElement("button",{className:"btn"},"\u7f16\u8f91"))))):l.a.createElement(f.a,null),L&&l.a.createElement(p,{position:M})))}}}]);