(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[5],{86:function(e,t,n){e.exports={editor:"mdEditor_editor__2Mi5a",fullscreen:"mdEditor_fullscreen__2rarV",content:"mdEditor_content__2PQBD","edit-preview":"mdEditor_edit-preview__zp7KK"}},90:function(e,t,n){e.exports={"md-toolbar":"md-toolbar_md-toolbar__1BCyJ","tool-item":"md-toolbar_tool-item__3eKQA",codebg:"md-toolbar_codebg__1irCR"}},96:function(e,t,n){"use strict";n.r(t);var a=n(60),r=n.n(a),c=n(61),o=n(56),l=n(0),i=n.n(l),u=n(3),s=n(57),d=n(58),m=n(10),b=n(83),p=(n(84),n(85),n(62)),f=n(67),k=n(87),v=n(88),h=n(91),E=n(89),O=n(92),j=n(90),_=n.n(j),y=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(h.a)(this,Object(E.a)(t).call(this,e))).toolHandler=function(e){n.props.onToolbarClick(e)},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=[{key:"undo",value:"undo",label:"UnDo",icon:d.i},{key:"redo",value:"redo",label:"ReDo",icon:d.f}];return i.a.createElement("div",{className:"dark ".concat(_.a["md-toolbar"])},t.map((function(t){return i.a.createElement("div",{key:t.key,className:_.a["tool-item"],onClick:function(){return e.toolHandler(t)},title:t.label},t.icon?i.a.createElement(s.a,{icon:t.icon}):i.a.createElement("span",{className:"code"===t.key?_.a.codebg:""},t.label))})))}}]),t}(i.a.Component),w=n(86),x=n.n(w);m.a.lib((function(){return Promise.resolve().then(n.t.bind(null,83,7))}));t.default=function(){var e=Object(u.useRouteMatch)(),t=Object(u.useHistory)(),n=Object(p.a)(),a=n.getNoteById,m=n.updateNoteById,k=n.fetchNoteById,v=Object(l.useRef)(),h=Object(l.useRef)(""),E=Object(l.useState)(""),O=Object(o.a)(E,2),j=O[0],_=O[1],w=Object(l.useState)(""),C=Object(o.a)(w,2),N=C[0],g=C[1],R=Object(l.useState)(0),F=Object(o.a)(R,2),q=F[0],S=F[1],B=Object(l.useState)(!1),D=Object(o.a)(B,2),z=D[0],H=D[1];Object(l.useEffect)((function(){e.path.includes("/md-editor/")&&I()}),[]);var I=function(){var t=Object(c.a)(r.a.mark((function t(){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=a(e.params.id))){t.next=6;break}_(n.data),g(n.data),t.next=14;break;case 6:return t.next=8,k(e.params.id);case 8:if(!(c=t.sent)){t.next=14;break}if(!c.substring(0,20).includes("<!DOCTYPE html>")){t.next=12;break}return t.abrupt("return");case 12:_(c),g(c);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var e=document.documentElement;z?document.exitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullscreen?e.mozRequestFullscreen():e.eequestFullscreen(),H(!z)},J=function(){var n="",a=e.params.id||v.current;n=e.params.id?"/detail/".concat(a):"/",t.push(n)},K=Object(l.useCallback)((function(){return i.a.createElement("h4",{className:"border-1px-bottom title dark"},i.a.createElement("span",{onClick:J},i.a.createElement(s.a,{icon:d.b,className:"back"}),"/note-add"===e.path?"\u65b0\u589e":"\u7f16\u8f91"),i.a.createElement("span",{className:x.a.fullscreen,title:z?"\u9000\u51fa\u5168\u5c4f":"\u5168\u5c4f",onClick:T},z?i.a.createElement(s.a,{icon:d.c}):i.a.createElement(s.a,{icon:d.d})))}),[z]),P={height:"".concat(window.innerHeight-92,"px")};return i.a.createElement("div",{className:"dark ".concat(x.a.editor)},K(),i.a.createElement("section",{className:x.a.content,style:P},i.a.createElement(b.UnControlled,{value:j,options:{tabSize:2},onChange:function(t,n,a){v.current||(v.current=t),e.params.id||h.current||(h.current="".concat(Date.now())),m(e.params.id||h.current,a),g(a)},onScroll:function(e,t){S(t.top/t.height)}}),i.a.createElement(f.a,{isEdit:!0,mdtext:N,scrollTopRate:q,className:x.a["edit-preview"]})),i.a.createElement(y,{onToolbarClick:function(e){var t,n,a,r;switch(console.log("toolItem: ",e),e.key){case"undo":null===(t=v.current)||void 0===t||t.undo();break;case"redo":null===(n=v.current)||void 0===n||n.redo();break;case"link":null===(a=v.current)||void 0===a||a.redo();break;case"pic":null===(r=v.current)||void 0===r||r.redo()}}}))}}}]);