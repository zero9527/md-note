(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[3],{86:function(e,t,n){e.exports={"note-detail":"styles_note-detail__A1Xhj","article-404":"styles_article-404__9jkpq",header:"styles_header__1o7G2",title:"styles_title__GgtK4",back:"styles_back__9_d1y"}},89:function(e,t,n){e.exports={"md-container":"styles_md-container__3fIh7","md-content":"styles_md-content__1BZgI","md-detail":"styles_md-detail__3E1ZT","md-preview":"styles_md-preview__eyAuJ",drag:"styles_drag__2fE19"}},90:function(e,t,n){e.exports={"pic-preview":"styles_pic-preview___6dgh",content:"styles_content__mGjqF",close:"styles_close__3QtS_",loading:"styles_loading__3N7qD","img-content":"styles_img-content__34pOG",text:"styles_text__GGazT"}},91:function(e,t,n){e.exports={catalog:"styles_catalog__hhxic",bg:"styles_bg__3QQdk",catelist:"styles_catelist__1RfRZ",close:"styles_close__21oXG",head:"styles_head__2fJ2w",desc:"styles_desc__1_ac3","cate-content":"styles_cate-content__Mg1oD","cate-item":"styles_cate-item__2jpto",active:"styles_active__I10Pt","cate-show":"styles_cate-show__23hX9"}},94:function(e,t,n){"use strict";n.r(t);var a=n(64),c=n.n(a),o=n(65),r=n(15),s=n(14),l=n(0),i=n.n(l),u=n(3),d=n(61),m=n(62),f=n(85),v=n.n(f),p=n(58),h=n(68),b=n(59),g=n(7),_=n(66),y=n(69),E=n(67),O=n(87),j=n.n(O),w=n(56),x=n.n(w),N=(n(88),n(60)),k=function(e){var t=e.className,n=void 0===t?"":t,a=e.onPosChange,c=(Object(N.a)(e,["className","onPosChange"]),Object(l.useRef)()),o=Object(l.useState)({posX:0,posY:0,posRight:10,posBottom:80}),u=Object(s.a)(o,2),d=u[0],m=u[1];Object(l.useEffect)((function(){return f(),function(){var e,t;null===(e=c.current)||void 0===e||e.removeEventListener("touchstart",v,{passive:!1}),null===(t=c.current)||void 0===t||t.removeEventListener("touchmove",p,{passive:!1})}}));var f=function(){var e,t;c.current=document.querySelector(".".concat(n)),null===(e=c.current)||void 0===e||e.addEventListener("touchstart",v,{passive:!1}),null===(t=c.current)||void 0===t||t.addEventListener("touchmove",p,{passive:!1})},v=function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0],n=t.pageX,a=t.pageY;m(Object(r.a)({},d,{posX:n,posY:a}))},p=function(e){e.preventDefault(),e.stopPropagation(),h(e)},h=function(e){var t=d.posX,n=d.posY,c=d.posRight,o=d.posBottom,r=e.touches[0],s=r.pageX,l=r.pageY,i=0,u=0;s>20&&s<window.innerWidth-20&&(i=s-t<0?c+Math.abs(s-t):c-Math.abs(s-t)),l>20&&l<window.innerHeight-20&&(u=l-n<0?o+Math.abs(l-n):o-Math.abs(l-n)),(s<=20||s>=window.innerWidth-20)&&(i=c),(l<=20||l>=window.innerHeight-20)&&(u=o),u=Math.round(u),i=Math.round(i),m({posX:s,posY:l,posBottom:u,posRight:i}),a({posBottom:u,posRight:i})};return i.a.createElement("div",{className:"btn ".concat(n)})},S=n(89),R=n.n(S),B=i.a.memo((function(e){var t=e.isEdit,n=e.mdtext,a=e.className,c=e.scrollTopRate,o=e.onMdRendered,r=Object(l.useRef)(),u=Object(l.useState)(!0),d=Object(s.a)(u,2),m=d[0],f=d[1],v=Object(l.useState)({posBottom:50,posRight:10}),p=Object(s.a)(v,2),h=p[0],b=p[1];Object(l.useEffect)((function(){c&&(r.current=document.querySelector(".".concat(R.a["md-content"])),r.current&&(r.current.scrollTop=r.current.scrollHeight*c))}),[c]);var g=function(e,t){var n=x.a.getLanguage(t)?t:"plaintext";return x.a.highlight(n,e,!0).value},_=Object(l.useMemo)((function(){return"container ".concat(R.a["md-container"]," ").concat(t?R.a["md-preview"]:R.a["md-detail"]," ").concat(a||"")}),[t,a]),y=Object(l.useMemo)((function(){var e="".concat(h.posBottom,"px"),n="".concat(h.posRight,"px");return t?{marginBottom:e,marginRight:n}:{}}),[t,h.posBottom,h.posRight]);return i.a.createElement("div",{className:_,style:y},t&&m&&i.a.createElement(k,{className:R.a.drag,onPosChange:function(e){var t=e.posBottom,n=e.posRight;b({posBottom:t,posRight:n})}}),(!t||m)&&i.a.createElement("section",{"data-text":t&&"\u9884\u89c8",className:R.a["md-content"],id:"md-content",dangerouslySetInnerHTML:{__html:j()(n,(function(){var e=new j.a.Renderer;e.heading=function(e,t){return"<h".concat(t,' class="heading-h').concat(t,'" id="').concat(e,'" title="').concat(e,'"><span>').concat(e,"</span></h").concat(t,">")},e.code=function(e,t){var n=encodeURI(e);return'<pre>\n        <div class="languange">\n          <span>'.concat(t,'</span>\n          <span class="copy-code" data-code="').concat(n,'">').concat('<span>\u590d\u5236\u4ee3\u7801</span>\n      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="copy" class="svg-inline--fa fa-copy fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n      <path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path>\n      </svg>','</span>\n        </div>\n        <div class="code-wrapper"><code class="').concat(t,'">').concat(g(e,t),"</code></div>\n      </pre>")},e.link=function(e,t,n){var a=t||e||"";return'<a href="'.concat(e,'" class="link" title="').concat(a,'" target="_blank">').concat(n,'\n      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="external-link-alt" class="svg-inline--fa fa-external-link-alt fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n      <path fill="currentColor" d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z">\n      </path></svg>\n      </a>')},e.image=function(e,t){return'<img src="'.concat(e,'" alt="').concat(t||"",'" class="md-img" />')},j.a.setOptions({renderer:e,highlight:g,langPrefix:"",pedantic:!1,gfm:!0,tables:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1})}(),void(null===o||void 0===o||o())))}}),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{textAlign:"right"}},i.a.createElement("button",{className:"btn",onClick:function(){f(!m)}},m?"\u5173\u95ed\u9884\u89c8":"\u663e\u793a\u9884\u89c8"))))}),(function(e,t){return!t.isEdit||!Object.keys(t).some((function(n){return t[n]!==e[n]}))})),C=n(92),L=n(91),T=n.n(L),M=function(e){var t=e.mdtext,n=e.defaultActive,a=e.onCateClick,c=e.onGetTitle,o=Object(N.a)(e,["mdtext","defaultActive","onCateClick","onGetTitle"]),r=Object(b.a)(),u=r.scrollTop,f=r.prevScrollTop,v=Object(l.useRef)(!0),p=Object(l.useState)(!1),h=Object(s.a)(p,2),g=h[0],_=h[1],y=Object(l.useState)([]),E=Object(s.a)(y,2),O=E[0],j=E[1],w=Object(l.useState)(""),x=Object(s.a)(w,2),k=x[0],S=x[1],R=Object(l.useState)(""),B=Object(s.a)(R,2),L=B[0],M=B[1],I=Object(l.useState)([]),H=Object(s.a)(I,2),A=H[0],V=H[1];Object(l.useEffect)((function(){L&&(document.title="MD-NOTE|".concat(L),null===c||void 0===c||c(L))}),[L]),Object(l.useEffect)((function(){Y(),n&&S(n)}),[]),Object(l.useEffect)((function(){document.body.style.overflowY=g?"hidden":"auto"}),[g]),Object(l.useEffect)((function(){V(function e(t){var n=[];return t.forEach((function(t){var a;(null===t||void 0===t||null===(a=t.child)||void 0===a?void 0:a.length)?n.push.apply(n,[t].concat(Object(C.a)(e(t.child)))):n.push(t)})),n}(O))}),[O]),Object(l.useEffect)((function(){v.current&&setTimeout(q,0)}),[u]);var q=function(){try{var e=A.reverse().find((function(e){var t=document.getElementById(e.id),n=null===t||void 0===t?void 0:t.getBoundingClientRect();return(null===n||void 0===n?void 0:n.top)<20&&(null===n||void 0===n?void 0:n.bottom)>0}));e&&(S(e.id),G(e))}catch(t){console.error(t)}},Y=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);M(t.slice(2,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var r={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),o.length>0&&(r.child=o,e=e.concat(o.map((function(e){return e.id})))),n.push(r)})),j((function(){return n.filter((function(e){return Boolean(e.id)}))}))},G=function(e){var t=document.getElementById("catelog-".concat(e.id));null===t||void 0===t||t.scrollIntoView(),null===a||void 0===a||a(e.id)},P=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},X=Object(l.useCallback)((function(e,t){var n="".concat(T.a["cate-item"]," ").concat(k===e.id?T.a.active:"");return i.a.createElement("li",{key:"".concat(e.id,"-").concat(t),"data-id":e.id,id:e.header,title:e.id,className:n,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),v.current=!1,P("remove"),S(e.id),null===a||void 0===a||a(e.id),setTimeout((function(){_(!1),v.current=!0}),0)}(e)}},e.label)}),[k]),D=Object(l.useMemo)((function(){return g?T.a["cate-show"]:""}),[g]);return i.a.createElement("div",{id:"catalog",className:T.a.catalog},i.a.createElement(d.a,{className:"btn",icon:m.d,onClick:function(){P("add"),setTimeout((function(){return _(!0)}),0)}}),i.a.createElement("div",{className:T.a.bg,style:{display:g?"block":"none"}}),i.a.createElement("div",{style:{marginTop:u>50&&u>f?"0":""},className:"".concat(T.a.catelist," ").concat(D)},g&&i.a.createElement("span",{className:T.a.close,onClick:function(){_(!1),P("remove")}},i.a.createElement(d.a,{icon:m.c})),i.a.createElement("section",{className:T.a.head,title:L},"\u76ee\u5f55: ",L),i.a.createElement("section",{className:T.a["cate-content"]},O.length>0?O.map((function(e,t){var n,a;return i.a.createElement("ul",{key:e.id},X(e,t),e.child&&(null===(n=e.child)||void 0===n?void 0:n.length)>0&&i.a.createElement("ul",null,null===(a=e.child)||void 0===a?void 0:a.map((function(e,t){return X(e,t)}))))})):i.a.createElement((function(){return i.a.createElement("div",{className:T.a.desc},i.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),i.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),i.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children)},I=n(9),H=n.n(I),A=n(90),V=n.n(A),q=function(e){var t=e.show,n=e.src,a=e.alt,c=e.onClose;return Object(l.useEffect)((function(){var e=document.querySelector("#md-note"),n=document.querySelector("#catalog");return t?(e.classList.add("blur"),n.classList.add("blur"),document.body.style.overflowY="hidden"):(e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""),function(){e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""}}),[t]),H.a.createPortal(i.a.createElement(i.a.Fragment,null,t&&i.a.createElement("section",{className:V.a["pic-preview"]},i.a.createElement("div",{className:V.a.content},i.a.createElement("button",{className:"btn ".concat(V.a.close),onClick:c},"X"),i.a.createElement("div",{className:V.a["img-content"]},n?i.a.createElement("img",{src:n,alt:a}):i.a.createElement("span",{className:V.a.loading},"\u6b63\u5728\u751f\u6210\u622a\u56fe\u3002\u3002\u3002")),i.a.createElement("div",{className:V.a.text},"\u5bfc\u51fa\u56fe\u7247\u9884\u89c8\uff0c\u53f3\u952e\u53e6\u5b58/\u957f\u6309\u4fdd\u5b58\uff01")))),document.body)},Y=n(86),G=n.n(Y);t.default=function(){var e=Object(p.a)((function(e){return[e.stickyRightStyle]})).stickyRightStyle,t=Object(h.a)((function(e){return[e.getNoteById,e.updateNoteById,e.fetchNoteByName]})),n=t.getNoteById,a=t.updateNoteById,f=t.fetchNoteByName,O=Object(u.useParams)(),j=O.tag,w=O.name,x=Object(u.useHistory)(),N=Object(u.useLocation)(),k=Object(b.a)().scrollTop,S=Object(l.useState)(!1),R=Object(s.a)(S,2),C=R[0],L=R[1],T=Object(l.useState)(""),I=Object(s.a)(T,2),H=I[0],A=I[1],V=Object(l.useState)(),Y=Object(s.a)(V,2),P=Y[0],X=Y[1],D=Object(l.useState)(!1),z=Object(s.a)(D,2),F=z[0],Z=z[1],J=Object(l.useState)(),Q=Object(s.a)(J,2),U=Q[0],W=Q[1],K=Object(l.useRef)(),$=Object(l.useState)({show:!1,src:"",alt:"",onClose:function(){ne((function(e){return Object(r.a)({},e,{show:!1})}))}}),ee=Object(s.a)($,2),te=ee[0],ne=ee[1];Object(l.useEffect)((function(){ae()}),[]),Object(l.useEffect)((function(){le()}),[k]);var ae=function(){var e=Object(o.a)(c.a.mark((function e(){var t,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=n(w))||void 0===t?void 0:t.data)){e.next=4;break}return X(t.data),e.abrupt("return");case 4:return e.prev=4,e.next=7,f(j,w);case 7:if(0!==(null===(o=e.sent)||void 0===o?void 0:o.code)){e.next=15;break}if(!o.data.substring(0,20).includes("<!DOCTYPE html>")){e.next=11;break}return e.abrupt("return");case 11:a(w,o.data),X(o.data),e.next=18;break;case 15:console.log("\u6570\u636e\u6ca1\u6709\u4e86\uff01"),X(""),L(!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){document.querySelector("#md-content").onclick=function(e){re(e),oe(e)};var e=document.querySelectorAll("#md-content .copy-code");Array.from(e).forEach((function(e){e.onmouseenter=function(e){re(e)}}))},oe=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".md-img");n&&window.open(n.src)},re=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".copy-code");if(n&&n.dataset.code){var a=n.querySelector("span"),c=decodeURI(n.dataset.code);K.current=new v.a(n,{action:function(){return"copy"},text:function(){return c}}),K.current.on("success",(function(){return o("\u590d\u5236\u6210\u529f")})),K.current.on("error",(function(){return o('<span style="color:red;">\u590d\u5236\u5931\u8d25</span>')}));var o=function(e){var t;a.innerHTML=e,null===(t=K.current)||void 0===t||t.destroy(),setTimeout((function(){a.innerHTML="\u590d\u5236\u4ee3\u7801"}),2e3)}}},se=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),W(e)}},le=function(){Z((function(){return k>window.innerHeight}))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{className:G.a.header},i.a.createElement("div",{className:"center-content"},i.a.createElement(d.a,{icon:m.b,className:G.a.back,title:"\u8fd4\u56de\u9996\u9875",onClick:function(){x.push("/")}}),i.a.createElement("span",{className:G.a.title,title:"\u6587\u7ae0\u6807\u9898"},"\xa0",H))),i.a.createElement("main",{className:"center-content ".concat(G.a["note-detail"])},P?i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{mdtext:P,onMdRendered:function(){var e=N.hash.substr(1,N.hash.length);setTimeout((function(){se(decodeURI(e)),ce()}),0)}}),i.a.createElement(q,te),i.a.createElement(E.a,null,i.a.createElement(M,{mdtext:P,defaultActive:U,onCateClick:function(e){x.replace({pathname:N.pathname,hash:e})},onGetTitle:function(e){A(e)}}))):!C&&i.a.createElement(g.a,null),C&&i.a.createElement((function(){return i.a.createElement("div",{className:G.a["article-404"]},"\u6587\u7ae0\u4e0d\u89c1\u4e86\u3002\u3002\u3002")}),null),F&&i.a.createElement(y.a,{position:e})))}}}]);