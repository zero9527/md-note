(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[5],{102:function(e,t,n){"use strict";n.r(t);var a=n(61),c=n.n(a),r=n(62),o=n(13),l=n(0),i=n.n(l),u=n(3),s=n(54),d=n(55),m=n(85),b=(n(86),n(87),n(88),n(59)),f=n(69),p=n(90),k=n(91),v=n(97),h=n(92),E=n(98),j=n(93),O=n.n(j),_=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(v.a)(this,Object(h.a)(t).call(this,e))).toolHandler=function(e){n.props.onToolbarClick(e)},n}return Object(E.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=[{key:"undo",value:"undo",label:"UnDo",icon:d.l},{key:"redo",value:"redo",label:"ReDo",icon:d.j}];return i.a.createElement("div",{className:"".concat(O.a["md-toolbar"])},t.map((function(t){return i.a.createElement("div",{key:t.key,className:O.a["tool-item"],onClick:function(){return e.toolHandler(t)},title:t.label},t.icon?i.a.createElement(s.a,{icon:t.icon}):i.a.createElement("span",{className:"code"===t.key?O.a.codebg:""},t.label))})))}}]),t}(i.a.Component),y=n(89),w=n.n(y);t.default=function(){var e=Object(u.useRouteMatch)(),t=e.path,n=e.params,a=Object(u.useHistory)(),p=Object(b.a)(),k=p.getNoteById,v=p.updateNoteById,h=p.fetchNoteById,E=Object(l.useRef)(),j=Object(l.useRef)(""),O=Object(l.useState)(""),y=Object(o.a)(O,2),g=y[0],x=y[1],C=Object(l.useState)(""),N=Object(o.a)(C,2),R=N[0],F=N[1],q=Object(l.useState)(0),S=Object(o.a)(q,2),B=S[0],D=S[1],z=Object(l.useState)(!1),H=Object(o.a)(z,2),I=H[0],T=H[1];Object(l.useEffect)((function(){t.includes("/md-editor/")&&J()}),[]);var J=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=k(n.id))){e.next=6;break}x(t.data),F(t.data),e.next=14;break;case 6:return e.next=8,h(n.tag,n.id);case 8:if(!(a=e.sent)){e.next=14;break}if(!a.substring(0,20).includes("<!DOCTYPE html>")){e.next=12;break}return e.abrupt("return");case 12:x(a),F(a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=document.documentElement;I?document.exitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullscreen?e.mozRequestFullscreen():e.eequestFullscreen(),T(!I)},M=function(){var e="",t=n.id||E.current;e=n.id?"/detail/".concat(t):"/",a.push(e)},P=Object(l.useCallback)((function(){return i.a.createElement("h4",{className:"border-1px-bottom title"},i.a.createElement("span",{onClick:M},i.a.createElement(s.a,{icon:d.b,className:"back"}),"/note-add"===t?"\u65b0\u589e":"\u7f16\u8f91"),i.a.createElement("span",{className:w.a.fullscreen,title:I?"\u9000\u51fa\u5168\u5c4f":"\u5168\u5c4f",onClick:K},I?i.a.createElement(s.a,{icon:d.f}):i.a.createElement(s.a,{icon:d.g})))}),[I]),Q={height:"".concat(window.innerHeight-92,"px")};return i.a.createElement("div",{className:"".concat(w.a.editor)},P(),i.a.createElement("section",{className:w.a.content,style:Q},i.a.createElement(m.UnControlled,{value:g,options:{tabSize:2,theme:"material"},onChange:function(e,t,a){E.current||(E.current=e),n.id||j.current||(j.current="".concat(Date.now())),v(n.id||j.current,a),F(a)},onScroll:function(e,t){D(t.top/t.height)}}),i.a.createElement(f.a,{isEdit:!0,mdtext:R,scrollTopRate:B,className:w.a["edit-preview"]})),i.a.createElement(_,{onToolbarClick:function(e){var t,n,a,c;switch(console.log("toolItem: ",e),e.key){case"undo":null===(t=E.current)||void 0===t||t.undo();break;case"redo":null===(n=E.current)||void 0===n||n.redo();break;case"link":null===(a=E.current)||void 0===a||a.redo();break;case"pic":null===(c=E.current)||void 0===c||c.redo()}}}))}},89:function(e,t,n){e.exports={editor:"mdEditor_editor__2Mi5a",fullscreen:"mdEditor_fullscreen__2rarV",content:"mdEditor_content__2PQBD","edit-preview":"mdEditor_edit-preview__zp7KK"}},93:function(e,t,n){e.exports={"md-toolbar":"md-toolbar_md-toolbar__1BCyJ","tool-item":"md-toolbar_tool-item__3eKQA",codebg:"md-toolbar_codebg__1irCR"}}}]);