(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[4],{77:function(e,t,n){e.exports={"note-detail":"note-detail_note-detail__300Me"}},80:function(e,t,n){e.exports={catalog:"mdCatalog_catalog__3r75B",bg:"mdCatalog_bg__3VFDw",catelist:"mdCatalog_catelist__VMStr",head:"mdCatalog_head__3D1zK",desc:"mdCatalog_desc__2yoDB","cate-content":"mdCatalog_cate-content__2W5XA","cate-item":"mdCatalog_cate-item__3f3Dt",active:"mdCatalog_active__KtXHX","cate-show":"mdCatalog_cate-show__vLLRv"}},81:function(e,t,n){e.exports={export:"export_export__aMcjj",tools:"export_tools__2Eo1y","export-a":"export_export-a__37G93",toggle:"export_toggle__2iKaM"}},82:function(e,t,n){e.exports={scroll2top:"scroll2top_scroll2top__2nPN3"}},94:function(e,t,n){"use strict";n.r(t);var a=n(60),c=n.n(a),o=n(61),r=n(56),i=n(0),l=n.n(i),u=n(3),s=n(57),d=n(58),m=n(24),f=n(82),b=n.n(f),v=function(e){var t=e.position;return l.a.createElement("div",{style:t,className:"btn dark ".concat(b.a.scroll2top),onClick:function(){var e=document.querySelector("#md-note");null===e||void 0===e||e.scrollIntoView()}},l.a.createElement(s.a,{icon:d.a}))},p=n(62),E=n(67),h=n(63),O=n(9),w=n.n(O),j=n(80),_=n.n(j),g=function(e){var t=e.mdtext,n=e.position,a=e.defaultActive,c=e.onCateClick,o=Object(h.a)(e,["mdtext","position","defaultActive","onCateClick"]),u=Object(i.useState)(!1),m=Object(r.a)(u,2),f=m[0],b=m[1],v=Object(i.useState)([]),p=Object(r.a)(v,2),E=p[0],O=p[1],j=Object(i.useState)(""),g=Object(r.a)(j,2),x=g[0],k=g[1],y=Object(i.useState)(""),N=Object(r.a)(y,2),C=N[0],S=N[1];Object(i.useEffect)((function(){C&&(document.title+="|".concat(C))}),[C]),Object(i.useEffect)((function(){a&&k(a)}),[a]),Object(i.useEffect)((function(){return L(),function(){I()}}),[]),Object(i.useEffect)((function(){function e(){f&&(window.innerWidth<1100&&(document.body.style.overflowY="auto"),b(!1),T("remove"))}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[f]),Object(i.useEffect)((function(){if(f){document.body.style.overflowY="hidden";var e=document.getElementById("catelog-".concat(a));null===e||void 0===e||e.scrollIntoView(),B()}else document.body.style.overflowY="auto"}),[f,a]);var L=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);S(t.slice(0,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var r={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),o.length>0&&(r.child=o,e=e.concat(o.map((function(e){return e.id})))),n.push(r)})),O((function(){return n.filter((function(e){return Boolean(e.id)}))}))},I=function(){return window.removeEventListener("click",z)},B=function(){return window.addEventListener("click",z)},z=function(){b(!1),I(),T("remove")},T=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},M=function(e){var t="".concat(_.a["cate-item"]," ").concat(x===e.id?_.a.active:"");return l.a.createElement("div",{"data-id":e.id,id:e.header,className:t,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),k(e.id),null===c||void 0===c||c(e.id),setTimeout((function(){return b(!1)}),0)}(e)}},e.label)},V=Object(i.useMemo)((function(){return f?_.a["cate-show"]:""}),[f]);return w.a.createPortal(l.a.createElement("div",{className:_.a.catalog,style:n},l.a.createElement(s.a,{className:"btn dark",icon:d.e,onClick:function(){T("add"),setTimeout((function(){return b(!0)}),0)}}),l.a.createElement("div",{className:_.a.bg,style:{display:f?"block":"none"}}),l.a.createElement("div",{className:"btn dark ".concat(_.a.catelist," ").concat(V)},l.a.createElement("section",{className:_.a.head},"\u76ee\u5f55: ",C),l.a.createElement("section",{className:_.a["cate-content"]},E.length>0?E.map((function(e){var t,n;return l.a.createElement("ul",{key:e.id},M(e),e.child&&(null===(t=e.child)||void 0===t?void 0:t.length)>0&&(null===(n=e.child)||void 0===n?void 0:n.map((function(e){return l.a.createElement("ul",{key:e.id},M(e))}))))})):l.a.createElement((function(){return l.a.createElement("div",{className:_.a.desc},l.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),l.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),l.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children),document.body)},x=(n(66),n(55),n(81)),k=n.n(x);var y=function(e){e.id,e.position;var t=e.mdtext,n=Object(h.a)(e,["id","position","mdtext"]),a=Object(i.useState)(""),c=Object(r.a)(a,2),o=c[0],u=(c[1],Object(i.useState)("")),m=Object(r.a)(u,2),f=m[0],b=(m[1],Object(i.useState)("")),v=Object(r.a)(b,2),p=v[0],E=v[1],O=Object(i.useState)(!1),w=Object(r.a)(O,2),j=w[0],_=w[1],g=Object(i.useState)(!1),x=Object(r.a)(g,2),y=(x[0],x[1],Object(i.useState)(!1)),N=Object(r.a)(y,2),C=(N[0],N[1],Object(i.useRef)()),S=Object(i.useRef)();Object(i.useEffect)((function(){C.current=document.querySelector("#md-content"),S.current=C.current.offsetWidth;var e=t.substring(0,t.indexOf("\n")).split("# ")[1];E(e||"\u5bfc\u51fa")}),[]),Object(i.useEffect)((function(){function e(){!j&&window.innerWidth>=1100&&_(!0),window.innerWidth<1100&&_(!1)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var L=function e(){setTimeout((function(){return _(!1)}),0),window.removeEventListener("click",e)};return l.a.createElement("div",{className:k.a.export},l.a.createElement("button",{className:"btn dark ".concat(k.a.toggle),onClick:function(){_(!j),setTimeout((function(){j?window.removeEventListener("click",L):window.addEventListener("click",L)}),0)}},l.a.createElement(s.a,{icon:j?d.h:d.g})),j&&l.a.createElement("div",{className:k.a.tools},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"export-a export-md",download:p+".md",href:f}),l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"export-a export-img",download:p+".png",href:o}),n.children))},N=n(77),C=n.n(N);t.default=function(){var e=Object(p.a)(),t=e.getNoteById,n=e.updateNoteById,a=e.fetchNoteById,f=Object(u.useParams)().id,b=Object(u.useHistory)(),h=Object(u.useLocation)(),O=Object(i.useState)(""),w=Object(r.a)(O,2),j=w[0],_=w[1],x=Object(i.useState)(!1),k=Object(r.a)(x,2),N=k[0],S=k[1],L=Object(i.useState)(),I=Object(r.a)(L,2),B=I[0],z=I[1],T=Object(i.useState)(),M=Object(r.a)(T,2),V=M[0],W=M[1];Object(i.useEffect)((function(){return D(),function(){window.removeEventListener("resize",R),window.removeEventListener("scroll",P)}}),[]);var D=function(){var e=Object(o.a)(c.a.mark((function e(){var o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(),window.addEventListener("resize",R),window.addEventListener("scroll",P),!(null===(o=t(f))||void 0===o?void 0:o.data)){e.next=7;break}return _(o.data),e.abrupt("return");case 7:return e.next=9,a(f);case 9:if(!(r=e.sent)){e.next=15;break}if(!r.substring(0,20).includes("<!DOCTYPE html>")){e.next=13;break}return e.abrupt("return");case 13:n(f,r),_(r);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=document.body.clientWidth,t=e>1100?{left:"".concat((e-1100)/2+800+20,"px")}:{right:"12px"};z(t)},A=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),W(e)}},P=function(){var e=document.documentElement.scrollTop;S((function(){return e>window.innerHeight}))};return l.a.createElement("div",{className:"center-content ".concat(C.a["note-detail"])},l.a.createElement("h4",{className:"border-1px-bottom title dark"},l.a.createElement("span",{onClick:function(){b.push("/")}},l.a.createElement(s.a,{icon:d.b,className:"back"}),"\u8be6\u60c5")),j?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{mdtext:j,onMdRendered:function(){var e=h.hash.substr(1,h.hash.length);setTimeout((function(){return A(decodeURI(e))}),0)}}),l.a.createElement(g,{mdtext:j,defaultActive:V,position:B,onCateClick:function(e){var t="/detail/".concat(f),n=e;b.replace({pathname:t,hash:n})}},l.a.createElement(y,{id:f,position:B,mdtext:j},l.a.createElement("a",{href:"./#/md-editor/".concat(f),className:"link"},l.a.createElement("button",{className:"btn dark"},"\u7f16\u8f91"))))):l.a.createElement(m.a,null),N&&l.a.createElement(v,{position:B}))}}}]);