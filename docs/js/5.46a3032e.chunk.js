(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[5],{108:function(e,t,n){"use strict";n.r(t);var a=n(67),o=n.n(a),c=n(68),r=n(63),i=n(0),u=n.n(i),s=n(7),l=n(64),d=n(65),m=n(30),f=n(91),v=n.n(f),p=function(e){var t=e.position;return u.a.createElement("div",{style:t,className:"btn ".concat(v.a.scroll2top),onClick:function(){var e=document.querySelector("#md-note");null===e||void 0===e||e.scrollIntoView()}},u.a.createElement(l.a,{icon:d.a}))},h=n(66),g=n(73),b=n(71),w=n(92),O=n.n(w),j=function(e){var t=e.mdtext,n=e.position,a=e.defaultActive,o=e.onCateClick,c=Object(b.a)(e,["mdtext","position","defaultActive","onCateClick"]),s=Object(i.useState)(!1),m=Object(r.a)(s,2),f=m[0],v=m[1],p=Object(i.useState)([]),h=Object(r.a)(p,2),g=h[0],w=h[1],j=Object(i.useState)(""),E=Object(r.a)(j,2),_=E[0],x=E[1],y=Object(i.useState)(""),N=Object(r.a)(y,2),k=N[0],S=N[1];Object(i.useEffect)((function(){k&&(document.title+="|".concat(k))}),[k]),Object(i.useEffect)((function(){a&&x(a)}),[a]),Object(i.useEffect)((function(){return C(),function(){L()}}),[]),Object(i.useEffect)((function(){function e(){f&&(window.innerWidth<1100&&(document.body.style.overflowY="auto"),v(!1))}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[f]),Object(i.useEffect)((function(){if(f){document.body.style.overflowY="hidden";var e=document.getElementById("catelog-".concat(a));null===e||void 0===e||e.scrollIntoView(),R()}else document.body.style.overflowY="auto"}),[f,a]);var C=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);S(t.slice(0,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),o=t.split("\n### ");o.shift();var c=[];o.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();c.push({id:t,header:"catelog-".concat(t),label:t})}));var r={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),c.length>0&&(r.child=c,e=e.concat(c.map((function(e){return e.id})))),n.push(r)})),w((function(){return n.filter((function(e){return Boolean(e.id)}))}))},L=function(){return window.removeEventListener("click",M)},R=function(){return window.addEventListener("click",M)},M=function(){v(!1),L()},B=function(e){var t="".concat(O.a["cate-item"]," ").concat(_===e.id?O.a.active:"");return u.a.createElement("div",{"data-id":e.id,id:e.header,className:t,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),x(e.id),null===o||void 0===o||o(e.id),setTimeout((function(){return v(!1)}),0)}(e)}},e.label)},D=Object(i.useMemo)((function(){return f?O.a["cate-show"]:""}),[f]);return u.a.createElement("div",{className:O.a.catalog,style:n},u.a.createElement(l.a,{className:"btn",icon:d.f,onClick:function(){return setTimeout((function(){return v(!0)}),0)}}),u.a.createElement("div",{className:O.a.bg,style:{display:f?"block":"none"}}),u.a.createElement("div",{className:"btn ".concat(O.a.catelist," ").concat(D)},u.a.createElement("section",{className:O.a.head},"\u76ee\u5f55: ",k),u.a.createElement("section",{className:O.a["cate-content"]},g.length>0?g.map((function(e){var t,n;return u.a.createElement("ul",{key:e.id},B(e),e.child&&(null===(t=e.child)||void 0===t?void 0:t.length)>0&&(null===(n=e.child)||void 0===n?void 0:n.map((function(e){return u.a.createElement("ul",{key:e.id},B(e))}))))})):u.a.createElement((function(){return u.a.createElement("div",{className:O.a.desc},u.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),u.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),u.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),c.children)},E=n(70),_=n(93),x=n.n(_),y=n(94),N=n.n(y);var k=function(e){e.id,e.position;var t=e.mdtext,n=Object(b.a)(e,["id","position","mdtext"]),a=Object(i.useState)(""),o=Object(r.a)(a,2),c=o[0],s=o[1],m=Object(i.useState)(""),f=Object(r.a)(m,2),v=f[0],p=f[1],h=Object(i.useState)(""),g=Object(r.a)(h,2),w=g[0],O=g[1],j=Object(i.useState)(!1),_=Object(r.a)(j,2),y=_[0],k=_[1],S=Object(i.useState)(!1),C=Object(r.a)(S,2),L=C[0],R=C[1],M=Object(i.useState)(!1),B=Object(r.a)(M,2),D=B[0],I=B[1],T=Object(i.useRef)(),P=Object(i.useRef)(),W=Object(i.useRef)(0);Object(i.useEffect)((function(){var e;T.current=document.querySelector("#md-content");var n=null===(e=T.current)||void 0===e?void 0:e.querySelectorAll("pre>code");if(n){var a=Array.from(n).map((function(e){return e.offsetWidth}));W.current=Math.max.apply(Math,Object(E.a)(a))}P.current=T.current.offsetWidth;var o=t.substring(0,t.indexOf("\n")).split("# ")[1];O(o||"\u5bfc\u51fa")}),[t]),Object(i.useEffect)((function(){function e(){!y&&window.innerWidth>=1100&&k(!0),window.innerWidth<1100&&k(!1)}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[y]);var Y=function e(){setTimeout((function(){return k(!1)}),0),window.removeEventListener("click",e)};return u.a.createElement("div",{className:N.a.export},u.a.createElement("button",{className:"btn ".concat(N.a.toggle),onClick:function(){k(!y),setTimeout((function(){y?window.removeEventListener("click",Y):window.addEventListener("click",Y)}),0)}},u.a.createElement(l.a,{icon:y?d.i:d.h})),y&&u.a.createElement("div",{className:N.a.tools},u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"export-a export-md",download:w+".md",href:v}),u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"export-a export-img",download:w+".png",href:c}),u.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),e.nativeEvent.stopPropagation(),!D){I(!0);var n=window.URL,a=new Blob([t],{type:"application/text"});p(n.createObjectURL(a)),setTimeout((function(){document.querySelector(".export-md").click(),I(!1)}),0)}}(e)}},"\u5bfc\u51famd\u6587\u4ef6",D?"...":""),u.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),!L){R(!0);var t=W.current+80;t>T.current.offsetWidth&&(T.current.style.width=t+"px"),setTimeout((function(){var e=T.current.offsetHeight+30;x()(T.current,{scale:1,x:0,y:0,width:t,height:e,windowWidth:t,useCORS:!0}).then((function(e){var t=e.toDataURL("image/png");s(t),t=null,T.current.style.width="auto",setTimeout((function(){document.querySelector(".export-img").click(),R(!1)}),0)}))}),0)}}(e)}},"\u5bfc\u51fa\u56fe\u7247",L?"...":""),n.children))},S=n(95),C=n.n(S);t.default=function(){var e=Object(h.a)(),t=e.getNoteById,n=e.updateNoteById,a=e.fetchNoteById,f=Object(s.g)().id,v=Object(s.e)(),b=Object(s.f)(),w=Object(i.useState)(""),O=Object(r.a)(w,2),E=O[0],_=O[1],x=Object(i.useState)(!1),y=Object(r.a)(x,2),N=y[0],S=y[1],L=Object(i.useState)(),R=Object(r.a)(L,2),M=R[0],B=R[1],D=Object(i.useState)(),I=Object(r.a)(D,2),T=I[0],P=I[1];Object(i.useEffect)((function(){return W(),function(){window.removeEventListener("resize",Y),window.removeEventListener("scroll",z)}}),[]);var W=function(){var e=Object(c.a)(o.a.mark((function e(){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(),window.addEventListener("resize",Y),window.addEventListener("scroll",z),!(null===(c=t(f))||void 0===c?void 0:c.data)){e.next=7;break}return _(c.data),e.abrupt("return");case 7:return e.next=9,a(f);case 9:if(!(r=e.sent)){e.next=15;break}if(!r.substring(0,20).includes("<!DOCTYPE html>")){e.next=13;break}return e.abrupt("return");case 13:n(f,r),_(r);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=document.body.clientWidth,t=e>1100?{left:"".concat((e-1100)/2+800+20,"px")}:{right:"12px"};B(t)},H=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),P(e)}},z=function(){var e=document.documentElement.scrollTop;S((function(){return e>window.innerHeight}))};return u.a.createElement("div",{className:"center-content ".concat(C.a["note-detail"])},u.a.createElement("h4",{className:"border-1px-bottom title"},u.a.createElement("span",{onClick:function(){v.push("/")}},u.a.createElement(l.a,{icon:d.b,className:"back"}),"\u8be6\u60c5")),E?u.a.createElement(u.a.Fragment,null,u.a.createElement(g.a,{mdtext:E,onMdRendered:function(){var e=b.hash.substr(1,b.hash.length);setTimeout((function(){return H(decodeURI(e))}),0)}}),u.a.createElement(j,{mdtext:E,defaultActive:T,position:M,onCateClick:function(e){var t="/detail/".concat(f),n=e;v.replace({pathname:t,hash:n})}},u.a.createElement(k,{id:f,position:M,mdtext:E},u.a.createElement("a",{href:"./#/md-editor/".concat(f),className:"link"},u.a.createElement("button",{className:"btn"},"\u7f16\u8f91"))))):u.a.createElement(m.a,null),N&&u.a.createElement(p,{position:M}))}},66:function(e,t,n){"use strict";var a=n(67),o=n.n(a),c=n(68),r=n(70),i=n(63),u=n(0),s=n(69);var l=n(17),d=n(13),m=n.n(d),f={testApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.get("/api/file/getFile",{params:e,data:{showLoading:!0}})},getDemo1Md:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.get("./md/demo1.md",{data:Object(l.a)({},e)})},getReactHookMd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.get("./md/React-Hook.md",{data:Object(l.a)({},e)})},getPromiseMd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.get("./md/promise_This_is.md",{data:Object(l.a)({},e,{showLoading:!0})})},getCalendarMd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m.a.get("./md/uni-app_calendar.md",{data:Object(l.a)({},e)})},updateFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.a.post("/api/file/updateFile",e)}},v=n(18),p={0:0,"24h":864e5,"7day":6048e5},h=[{id:"",date:"",desc:"",data:""}];t.a=Object(s.createModel)((function(){var e=Object(u.useState)("".concat(Date.now())),t=Object(i.a)(e,2),a=t[0],s=t[1],l=Object(u.useState)(!1),d=Object(i.a)(l,2),m=d[0],g=d[1],b=Object(u.useRef)(function(e){var t=e.type,n=void 0===t?"localStorage":t,a=e.cacheKey,o=e.version,c=o;return{cacheKey:a,localVersion:c,getData:function(){var e=window[n].getItem(a);return e?JSON.parse(e).data:null},setData:function(e){var t={version:c,data:e};window[n].setItem(a,JSON.stringify(t))},updateVersion:function(e){c=e;var t=window[n].getItem(a);(t?JSON.parse(t).version:o)!==c&&window[n].removeItem(a)},clear:function(){window[n].removeItem(a)}}}({cacheKey:"note-list",version:a})),w=Object(u.useState)(b.current.getData()||h),O=Object(i.a)(w,2),j=O[0],E=O[1];Object(u.useEffect)((function(){var e;_(),""===(null===(e=j[0])||void 0===e?void 0:e.id)&&(g(!0),n.e(9).then(n.bind(null,106)).then((function(e){var t=e.default;x(function(e){var t=[].concat(Object(r.a)(j),Object(r.a)(e)),n=[];return t.forEach((function(e){e.id&&!n.some((function(t){return t.id===e.id}))&&n.push(e)})),n}(t)),g(!1)})))}),[j]),Object(u.useEffect)((function(){j&&b.current.setData(j)}),[j]);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24h";Number(a)+p[e]<=Date.now()&&(console.log("\u6e05\u7f13\u5b58"),s("".concat(Date.now())),x([]),b.current.updateVersion("".concat(Date.now())));var t=b.current.getData();t&&x(t)},x=function(e){var t=y(e);E((function(){return t}))},y=function e(t){if(t.length<=1)return t;var n=t.shift(),a=[],o=[];return t.forEach((function(e){var t=new Date(n.date).getTime();new Date(e.date).getTime()<=t?a.push(e):o.push(e)})),e(o).concat(n).concat(e(a))},N=function(e){return e.includes("\n")?e.substring(0,e.indexOf("\n")):e};return{loading:m,noteList:j,getNoteList:function(){return j},getNoteById:function(e){_();var t=null===j||void 0===j?void 0:j.find((function(t){return t.id===e}));return t||null},updateNoteById:function(e,t){e||(e="".concat(Date.now())),E((function(n){var a=n.findIndex((function(t){return t.id===e})),o=Object(v.a)({timeStamp:Date.now(),splitChar:"/"});return a<0?n.push({id:e,data:t,date:o,desc:N(t)}):n[a]={id:e,data:t,date:o,desc:N(t)},y(n).map((function(e){return e}))}))},updateNoteList:x,fetchNoteById:function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["getDemo1Md","getReactHookMd","getPromiseMd","getCalendarMd"],t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f[n[t]]();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(3),console.error("fetch error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),clearCache:function(){b.current.clear()}}}))},72:function(e,t,n){e.exports={"md-container":"md-preview_md-container__2Tzsp","md-content":"md-preview_md-content__2evkh","md-detail":"md-preview_md-detail__1p4w4","md-preview":"md-preview_md-preview__UbiTg",drag:"md-preview_drag__3Yxhl"}},73:function(e,t,n){"use strict";var a=n(63),o=n(0),c=n.n(o),r=n(74),i=n.n(r),u=n(75),s=n.n(u),l=n(76),d=n.n(l),m=n(77),f=n.n(m),v=n(78),p=n.n(v),h=(n(79),n(17)),g=n(71),b=function(e){var t=e.className,n=void 0===t?"":t,r=e.onPosChange,i=(Object(g.a)(e,["className","onPosChange"]),Object(o.useRef)()),u=Object(o.useState)({posX:0,posY:0,posRight:10,posBottom:80}),s=Object(a.a)(u,2),l=s[0],d=s[1];Object(o.useEffect)((function(){return m(),function(){var e,t;null===(e=i.current)||void 0===e||e.removeEventListener("touchstart",f,{passive:!1}),null===(t=i.current)||void 0===t||t.removeEventListener("touchmove",v,{passive:!1})}}));var m=function(){var e,t;i.current=document.querySelector(".".concat(n)),null===(e=i.current)||void 0===e||e.addEventListener("touchstart",f,{passive:!1}),null===(t=i.current)||void 0===t||t.addEventListener("touchmove",v,{passive:!1})},f=function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0],n=t.pageX,a=t.pageY;d(Object(h.a)({},l,{posX:n,posY:a}))},v=function(e){e.preventDefault(),e.stopPropagation(),p(e)},p=function(e){var t=l.posX,n=l.posY,a=l.posRight,o=l.posBottom,c=e.touches[0],i=c.pageX,u=c.pageY,s=0,m=0;i>20&&i<window.innerWidth-20&&(s=i-t<0?a+Math.abs(i-t):a-Math.abs(i-t)),u>20&&u<window.innerHeight-20&&(m=u-n<0?o+Math.abs(u-n):o-Math.abs(u-n)),(i<=20||i>=window.innerWidth-20)&&(s=a),(u<=20||u>=window.innerHeight-20)&&(m=o),m=Math.round(m),s=Math.round(s),d({posX:i,posY:u,posBottom:m,posRight:s}),r({posBottom:m,posRight:s})};return c.a.createElement("div",{className:"btn ".concat(n)})},w=n(72),O=n.n(w);t.a=c.a.memo((function(e){var t=e.isEdit,n=e.mdtext,r=e.className,u=e.scrollTopRate,l=e.onMdRendered,m=Object(o.useRef)(),v=Object(o.useState)(!0),h=Object(a.a)(v,2),g=h[0],w=h[1],j=Object(o.useState)({posBottom:50,posRight:10}),E=Object(a.a)(j,2),_=E[0],x=E[1];Object(o.useEffect)((function(){u&&(m.current=document.querySelector(".".concat(O.a["md-content"])),m.current&&(m.current.scrollTop=m.current.scrollHeight*u))}),[u]);var y=Object(o.useMemo)((function(){return"".concat(O.a["md-container"]," ").concat(t?O.a["md-preview"]:O.a["md-detail"]," ").concat(r||"")}),[t,r]),N=Object(o.useMemo)((function(){var e="".concat(_.posBottom,"px"),n="".concat(_.posRight,"px");return t?{marginBottom:e,marginRight:n}:{}}),[t,_.posBottom,_.posRight]);return c.a.createElement("div",{className:y,style:N},t&&g&&c.a.createElement(b,{className:O.a.drag,onPosChange:function(e){var t=e.posBottom,n=e.posRight;x({posBottom:t,posRight:n})}}),(!t||g)&&c.a.createElement("section",{"data-text":t&&"\u9884\u89c8",className:O.a["md-content"],id:"md-content",dangerouslySetInnerHTML:{__html:i()(n,(function(){var e=new i.a.Renderer;e.heading=function(e,t){return"<h".concat(t,' class="heading-h').concat(t,'" id="').concat(e,'" title="').concat(e,'">').concat(e,"</h").concat(t,">")},e.link=function(e,t,n){return'<a href="'.concat(e,'" title="').concat(t,'" target="_blank">').concat(n,"</a>")},e.image=function(e,t,n){return'<img src="'.concat(e,'" title="').concat(t||n,'" alt="').concat(n,'" style="max-height: 700px; display: inherit; margin: auto;" />')},i.a.setOptions({renderer:e,highlight:function(e){return s.a.registerLanguage("javascript",d.a),s.a.registerLanguage("less",f.a),s.a.registerLanguage("xml",p.a),s.a.highlightAuto(e).value},langPrefix:"",pedantic:!1,gfm:!0,tables:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1})}(),void(null===l||void 0===l||l())))}}),t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement("button",{className:"btn",onClick:function(){w(!g)}},g?"\u5173\u95ed\u9884\u89c8":"\u663e\u793a\u9884\u89c8"))))}),(function(e,t){return!t.isEdit||!Object.keys(t).some((function(n){return t[n]!==e[n]}))}))},91:function(e,t,n){e.exports={scroll2top:"scroll2top_scroll2top__2nPN3"}},92:function(e,t,n){e.exports={catalog:"mdCatalog_catalog__3r75B",bg:"mdCatalog_bg__3VFDw",catelist:"mdCatalog_catelist__VMStr",head:"mdCatalog_head__3D1zK",desc:"mdCatalog_desc__2yoDB","cate-content":"mdCatalog_cate-content__2W5XA","cate-item":"mdCatalog_cate-item__3f3Dt",active:"mdCatalog_active__KtXHX","cate-show":"mdCatalog_cate-show__vLLRv"}},94:function(e,t,n){e.exports={export:"export_export__aMcjj",tools:"export_tools__2Eo1y","export-a":"export_export-a__37G93",toggle:"export_toggle__2iKaM"}},95:function(e,t,n){e.exports={"note-detail":"note-detail_note-detail__300Me"}}}]);