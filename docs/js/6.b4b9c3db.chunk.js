(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[6],{102:function(e,t,a){"use strict";a.r(t);var n=a(61),c=a.n(n),o=a(62),l=a(13),i=a(0),r=a.n(i),u=a(3),s=a(54),d=a(55),f=a(56),m=a(4),b=a(70),h=a(59),v=a(69),E=a(64),O=a(60),g=a(68),p=a(67),j=a(57),_=a(84),y=a.n(_),k=function(e){var t=e.mdtext,a=e.defaultActive,n=e.onCateClick,c=e.onGetTitle,o=Object(j.a)(e,["mdtext","defaultActive","onCateClick","onGetTitle"]),u=Object(O.a)().scrollTop,f=Object(i.useRef)(!0),m=Object(i.useState)(!1),b=Object(l.a)(m,2),h=b[0],v=b[1],E=Object(i.useState)([]),g=Object(l.a)(E,2),_=g[0],k=g[1],C=Object(i.useState)(""),N=Object(l.a)(C,2),x=N[0],w=N[1],B=Object(i.useState)(""),I=Object(l.a)(B,2),S=I[0],T=I[1],R=Object(i.useState)([]),D=Object(l.a)(R,2),L=D[0],V=D[1];Object(i.useEffect)((function(){S&&(document.title+="|".concat(S),null===c||void 0===c||c(S))}),[S]),Object(i.useEffect)((function(){a&&w(a)}),[]),Object(i.useEffect)((function(){F()}),[x]),Object(i.useEffect)((function(){M()}),[]),Object(i.useEffect)((function(){document.body.style.overflowY=h?"hidden":"auto"}),[h]),Object(i.useEffect)((function(){V(function e(t){var a=[];return t.forEach((function(t){var n;(null===t||void 0===t||null===(n=t.child)||void 0===n?void 0:n.length)?a.push.apply(a,[t].concat(Object(p.a)(e(t.child)))):a.push(t)})),a}(_))}),[_]),Object(i.useEffect)((function(){f.current&&A()}),[u]);var A=function(){try{L.forEach((function(e){var t=document.getElementById(e.id);t&&(t.getBoundingClientRect().top<0&&w(e.id))}))}catch(e){console.error(e)}},M=function(){var e=[],a=[],n=t.slice(t.indexOf("\n"),t.length);T(t.slice(1,t.indexOf("\n"))),n.split("\n## ").forEach((function(t){var n=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var l={id:n,header:"catelog-".concat(n),label:n,child:[]};e.push(n),o.length>0&&(l.child=o,e=e.concat(o.map((function(e){return e.id})))),a.push(l)})),k((function(){return a.filter((function(e){return Boolean(e.id)}))}))},F=function(){var e=document.getElementById("catelog-".concat(x));null===e||void 0===e||e.scrollIntoView(),null===n||void 0===n||n(x)},G=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},H=Object(i.useCallback)((function(e){var t="".concat(y.a["cate-item"]," ").concat(x===e.id?y.a.active:"");return r.a.createElement("div",{"data-id":e.id,id:e.header,className:t,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),f.current=!1,G("remove"),w(e.id),null===n||void 0===n||n(e.id),setTimeout((function(){v(!1),f.current=!0}),0)}(e)}},e.label)}),[x]),K=Object(i.useMemo)((function(){return h?y.a["cate-show"]:""}),[h]);return r.a.createElement("div",{id:"catalog",className:y.a.catalog},r.a.createElement(s.a,{className:"btn",icon:d.h,onClick:function(){G("add"),setTimeout((function(){return v(!0)}),0)}}),r.a.createElement("div",{className:y.a.bg,style:{display:h?"block":"none"}}),r.a.createElement("div",{className:"".concat(y.a.catelist," ").concat(K),onClick:function(e){return e.stopPropagation()}},h&&r.a.createElement("span",{className:y.a.close,onClick:function(){v(!1),G("remove")}},r.a.createElement(s.a,{icon:d.d})),r.a.createElement("section",{className:y.a.head,title:S},"\u76ee\u5f55: ",S),r.a.createElement("section",{className:y.a["cate-content"]},_.length>0?_.map((function(e){var t,a;return r.a.createElement("ul",{key:e.id},H(e),e.child&&(null===(t=e.child)||void 0===t?void 0:t.length)>0&&(null===(a=e.child)||void 0===a?void 0:a.map((function(e){return r.a.createElement("ul",{key:e.id},H(e))}))))})):r.a.createElement((function(){return r.a.createElement("div",{className:y.a.desc},r.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),r.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),r.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children)},C=a(79),N=a.n(C);t.default=function(){Object(f.a)((function(e){return[e.theme]})).theme;var e=Object(h.a)((function(e){return[e.getNoteById,e.updateNoteById,e.fetchNoteById]})),t=e.getNoteById,a=e.updateNoteById,n=e.fetchNoteById,p=Object(u.useParams)(),j=p.tag,_=p.tid,y=Object(u.useHistory)(),C=Object(u.useLocation)(),x=Object(O.a)().scrollTop,w=Object(f.a)((function(e){return[e.stickyRightStyle]})).stickyRightStyle,B=Object(i.useState)(!1),I=Object(l.a)(B,2),S=I[0],T=I[1],R=Object(i.useState)(""),D=Object(l.a)(R,2),L=D[0],V=D[1],A=Object(i.useState)(),M=Object(l.a)(A,2),F=M[0],G=M[1],H=Object(i.useState)(!1),K=Object(l.a)(H,2),P=K[0],X=K[1],J=Object(i.useState)(),Y=Object(l.a)(J,2),q=Y[0],z=Y[1];Object(i.useEffect)((function(){Q()}),[]),Object(i.useEffect)((function(){W()}),[x]);var Q=function(){var e=Object(o.a)(c.a.mark((function e(){var o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(o=t(_))||void 0===o?void 0:o.data)){e.next=4;break}return G(o.data),e.abrupt("return");case 4:return e.prev=4,e.next=7,n(j,_);case 7:if(0!==(null===(l=e.sent)||void 0===l?void 0:l.code)){e.next=15;break}if(!l.data.substring(0,20).includes("<!DOCTYPE html>")){e.next=11;break}return e.abrupt("return");case 11:a(_,l.data),G(l.data),e.next=18;break;case 15:console.log("\u6570\u636e\u6ca1\u6709\u4e86\uff01"),G(""),T(!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}(),U=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),z(e)}},W=function(){X((function(){return x>window.innerHeight}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:N.a.header},r.a.createElement("div",{className:"center-content"},r.a.createElement(s.a,{icon:d.c,className:N.a.back,title:"\u8fd4\u56de\u9996\u9875",onClick:function(){y.push("/")}}),r.a.createElement("span",{title:"\u6587\u7ae0\u6807\u9898"},"\xa0",L))),r.a.createElement("main",{className:"center-content ".concat(N.a["note-detail"])},F?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{mdtext:F,onMdRendered:function(){var e=C.hash.substr(1,C.hash.length);setTimeout((function(){return U(decodeURI(e))}),0)}}),r.a.createElement(v.a,null,r.a.createElement(k,{mdtext:F,defaultActive:q,onCateClick:function(e){y.replace({pathname:C.pathname,hash:e})},onGetTitle:function(e){V(e)}}))):!S&&r.a.createElement(m.a,null),S&&r.a.createElement((function(){return r.a.createElement("div",{className:N.a["article-404"]},"\u6587\u7ae0\u4e0d\u89c1\u4e86\u3002\u3002\u3002")}),null),P&&r.a.createElement(b.a,{position:w})))}},79:function(e,t,a){e.exports={"note-detail":"note-detail_note-detail__300Me","article-404":"note-detail_article-404__o-fL3",header:"note-detail_header__w4hse",back:"note-detail_back__1cf7y"}},84:function(e,t,a){e.exports={catalog:"mdCatalog_catalog__3r75B",bg:"mdCatalog_bg__3VFDw",catelist:"mdCatalog_catelist__VMStr",close:"mdCatalog_close__1gQeK",head:"mdCatalog_head__3D1zK",desc:"mdCatalog_desc__2yoDB","cate-content":"mdCatalog_cate-content__2W5XA","cate-item":"mdCatalog_cate-item__3f3Dt",active:"mdCatalog_active__KtXHX","cate-show":"mdCatalog_cate-show__vLLRv"}}}]);