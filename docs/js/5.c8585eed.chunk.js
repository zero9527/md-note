(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[5],{71:function(e,t,n){e.exports={"note-list":"noteList_note-list__Fam2w",add:"noteList_add__u0lP1","month-item":"noteList_month-item__1ik4y","item-month":"noteList_item-month__1eENs","item-month-en":"noteList_item-month-en__1k0sL","note-item":"noteList_note-item__2tDXJ","item-date":"noteList_item-date__2d5pd",time:"noteList_time__1eDmB",date:"noteList_date__3z7yY","item-desc":"noteList_item-desc__2pf3i",skeleton:"noteList_skeleton__3OL71",loading:"noteList_loading__2b5RR"}},76:function(e,t,n){e.exports={"home-tools":"homeTools_home-tools__3j60r",theme:"homeTools_theme__2FxZi",setting:"homeTools_setting__3IuNE",wrapper:"homeTools_wrapper__18a-d",content:"homeTools_content__14P2G",show:"homeTools_show__3-9Hy",title:"homeTools_title__2hZYy",item:"homeTools_item__3gz-k"}},95:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(3),i=n(23),r=n(57),l=n(12),s=n(61),m=n(8),u=n.n(m),d=n(55),f=n(56),h=function(){var e=Object(r.a)((function(e){return[e.theme,e.setTheme]})),t=e.theme,n=e.setTheme;return o.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){n("dark"===t?"light":"dark")}},"light"===t?o.a.createElement(d.a,{icon:f.i}):o.a.createElement(d.a,{icon:f.g}))},v=n(76),_=n.n(v),p=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(!1),c=Object(l.a)(n,2),i=c[0],r=c[1],m=Object(a.useState)(!1),v=Object(l.a)(m,2),p=v[0],E=v[1],b=Object(s.a)((function(e){return[e.clearCache,e.noteList,e.updateNoteList]})),j=b.clearCache,L=b.noteList,g=b.updateNoteList;Object(a.useEffect)((function(){w(i?"add":"remove");var e=function e(){setTimeout((function(){return r(!1)}),0),window.removeEventListener("click",e)};i?window.addEventListener("click",e):window.removeEventListener("click",e)}),[i]);var w=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},O=function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0],a=new FileReader;a.readAsText(n),a.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;try{var a=JSON.parse(n||"");if(!a||0===a.length||!Array.isArray(a))return;var o=a[0];Object.keys(o).some((function(e){return!o[e]}))||g(a)}catch(c){console.error("\u5bfc\u5165\u6587\u4ef6\u5931\u8d25\uff01",c),alert("\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e\uff01")}}},k="".concat(_.a.content," ").concat(i?_.a.show:"");return o.a.createElement("div",{className:_.a["home-tools"]},o.a.createElement(h,null),o.a.createElement(d.a,{className:_.a.setting,icon:f.c,onClick:function(e){e.stopPropagation(),r(!0)}}),u.a.createPortal(o.a.createElement("div",{className:_.a.wrapper,style:{display:i?"block":""}},o.a.createElement("section",{className:k},o.a.createElement("div",{className:_.a.title},o.a.createElement("span",null,"\u8bbe\u7f6e")),o.a.createElement("div",{className:_.a.item,onClick:function(e){e.stopPropagation(),j(),setTimeout((function(){alert("\u7f13\u5b58\u6e05\u7406\u6210\u529f\uff01"),r(!1)}),0)}},"\u6e05\u7f13\u5b58"),o.a.createElement("div",{className:_.a.item,onClick:function(t){if(t.stopPropagation(),!p){E(!0);var n=window.URL,a=new Blob([JSON.stringify(L)],{type:"application/json"});e.current.href=n.createObjectURL(a),setTimeout((function(){e.current.click(),E(!1),r(!1)}),0)}}},o.a.createElement("a",{ref:e,href:"href",download:"md-note\u5907\u4efd.json",hidden:!0}),"\u5bfc\u51fa\u5230\u6587\u4ef6(*.josn) ",p?"...":""),o.a.createElement("div",{className:_.a.item,onClick:function(e){var n,a;e.stopPropagation(),null===(n=t.current)||void 0===n||n.addEventListener("change",O),null===(a=t.current)||void 0===a||a.click()}},o.a.createElement("input",{ref:t,type:"file",accept:"application/json",hidden:!0}),"\u4ece\u6587\u4ef6\u5bfc\u5165(*.json)"))),document.body))},E=n(71),b=n.n(E);var j=function(e){var t,n=e.show,c=void 0===n||n,i=Object(a.useRef)(),m=Object(r.a)((function(e){return[e.theme,e.height]})),u=m.height,d=(m.theme,Object(s.a)()),f=d.loading,h=d.noteList,v=Object(a.useState)(),_=Object(l.a)(v,2),E=_[0],j=_[1],L=Object(a.useState)(0),g=Object(l.a)(L,2),w=g[0],O=g[1];function k(){var e=document.body.clientWidth,t=e>1100?{left:"".concat((e-1100)/2+1100-60,"px")}:{right:"12px"};j(t)}return Object(a.useEffect)((function(){return k(),window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}}),[]),Object(a.useEffect)((function(){var e;function t(e){O(e.target.scrollTop||w)}return i.current=document.querySelector(".".concat(b.a["note-list"])),null===(e=i.current)||void 0===e||e.addEventListener("scroll",t),function(){var e;null===(e=i.current)||void 0===e||e.removeEventListener("scroll",t)}}),[]),Object(a.useEffect)((function(){c&&i.current&&(i.current.scrollTop=w)}),[c]),o.a.createElement("div",{className:"center-content ".concat(b.a["note-list"]),style:{height:u,display:c?"block":"none"}},o.a.createElement("div",{className:"border-1px-bottom title"},o.a.createElement("span",null,"md-note"),o.a.createElement(p,null)),o.a.createElement("section",{id:f?b.a.skeleton:"",className:b.a["month-item"]},(null===h||void 0===h?void 0:h.length)>0?null===h||void 0===h||null===(t=h.map)||void 0===t?void 0:t.call(h,(function(e,t){return o.a.createElement("a",{className:"link ".concat(b.a["note-item"]),key:t,href:"./#/detail/".concat(e.id)},o.a.createElement("div",{className:b.a["item-date"]},o.a.createElement("div",{className:b.a.time},e.date.substr(11,5)),o.a.createElement("div",{className:b.a.date},e.date.substr(5,5))),o.a.createElement("div",{className:b.a["item-desc"]},e.desc))})):o.a.createElement("div",null,"\u6ca1\u6709\u6570\u636e")),o.a.createElement("a",{href:"./#/note-add",className:"link btn ".concat(b.a.add),style:E},"+"))},L=function(e){var t=e.pathname,n=e.children;Object(a.useEffect)((function(){t.includes("/detail/")?c("md-note|\u8be6\u60c5"):t.includes("/md-editor/")?c("md-note|\u7f16\u8f91"):t.includes("/note-add")?c("md-note|\u6dfb\u52a0"):c("md-note")}),[t]);var c=function(e){return document.title=e};return o.a.createElement(o.a.Fragment,null,n)};t.default=function(e){var t=e.children,n=Object(c.useLocation)().pathname,l=Object(r.a)((function(e){return[e.setIsMobile]})).setIsMobile;return Object(a.useEffect)((function(){var e=i.a.test(window.navigator.userAgent);l(e)}),[]),o.a.createElement(L,{pathname:n},t,o.a.createElement(j,{show:"/"===n}))}}}]);