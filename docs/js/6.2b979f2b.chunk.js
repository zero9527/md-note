(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[6],{100:function(e,t,n){"use strict";n.r(t);var a=n(13),o=n(0),c=n.n(o),i=n(61),l=n(55),r=n(56),s=n(57),m=function(){var e=Object(s.a)((function(e){return[e.theme,e.setTheme]})),t=e.theme,n=e.setTheme;return c.a.createElement("span",{onClick:function(){n("dark"===t?"light":"dark")}},"light"===t?c.a.createElement(l.a,{icon:r.i}):c.a.createElement(l.a,{icon:r.g}))},d=n(64),u=n(94),_=n.n(u),f=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)(null),n=Object(o.useState)(!1),s=Object(a.a)(n,2),u=s[0],f=s[1],p=Object(o.useState)(!1),v=Object(a.a)(p,2),E=v[0],h=v[1],b=Object(i.a)((function(e){return[e.clearCache,e.noteList,e.updateNoteList]})),g=b.clearCache,L=b.noteList,N=b.updateNoteList,j=function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0],a=new FileReader;a.readAsText(n),a.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;try{var a=JSON.parse(n||"");if(!a||0===a.length||!Array.isArray(a))return;var o=a[0];Object.keys(o).some((function(e){return!o[e]}))||N(a)}catch(c){console.error("\u5bfc\u5165\u6587\u4ef6\u5931\u8d25\uff01",c),alert("\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e\uff01")}}};return c.a.createElement("div",{className:_.a["home-tools"]},c.a.createElement(m,null),c.a.createElement(l.a,{className:_.a.setting,icon:r.c,onClick:function(e){e.stopPropagation(),f(!0)}}),c.a.createElement(d.a,{visible:u,title:"\u8bbe\u7f6e",wrapperClassName:_.a.wrapper,onClose:function(){return f(!1)}},c.a.createElement("section",{className:_.a.content},c.a.createElement("div",{className:_.a.item,onClick:function(e){e.stopPropagation(),g(),setTimeout((function(){alert("\u7f13\u5b58\u6e05\u7406\u6210\u529f\uff01"),f(!1)}),0)}},"\u6e05\u7f13\u5b58"),c.a.createElement("div",{className:_.a.item,onClick:function(t){if(t.stopPropagation(),!E){h(!0);var n=window.URL,a=new Blob([JSON.stringify(L)],{type:"application/json"});e.current.href=n.createObjectURL(a),setTimeout((function(){e.current.click(),h(!1),f(!1)}),0)}}},c.a.createElement("a",{ref:e,href:"href",download:"md-note\u5907\u4efd.json",hidden:!0}),"\u5bfc\u51fa\u5230\u6587\u4ef6(*.josn) ",E?"...":""),c.a.createElement("div",{className:_.a.item,onClick:function(e){var n,a;e.stopPropagation(),null===(n=t.current)||void 0===n||n.addEventListener("change",j),null===(a=t.current)||void 0===a||a.click()}},c.a.createElement("input",{ref:t,type:"file",accept:"application/json",hidden:!0}),"\u4ece\u6587\u4ef6\u5bfc\u5165(*.json)"))))},p=n(93),v=n.n(p);t.default=function(e){var t,n=Object(i.a)(),l=n.loading,r=n.noteList,s=Object(o.useState)(0),m=Object(a.a)(s,2),d=m[0],u=m[1];Object(o.useEffect)((function(){_()}),[]),Object(o.useEffect)((function(){return window.addEventListener("scroll",p,!1),function(){window.removeEventListener("scroll",p,!1)}}),[]);var _=function(){var t=e.scrollRestore();setTimeout((function(){document.body.scrollTop=t||0,document.documentElement.scrollTop=t||0}),0)},p=function(e){var t=e.target.body.scrollTop||e.target.documentElement.scrollTop;u(t||0)},E=function(){e.beforeRouteLeave(d,{})};return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"border-1px-bottom header"},c.a.createElement("div",{className:"center-content content"},c.a.createElement("span",null,"MD-NOTE"),c.a.createElement(f,null))),c.a.createElement("main",{className:"center-content ".concat(v.a["note-list"])},c.a.createElement("section",{id:l?v.a.skeleton:"",className:v.a.container},(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r||null===(t=r.map)||void 0===t?void 0:t.call(r,(function(e,t){return c.a.createElement("a",{className:"link ".concat(v.a["note-item"]),key:"".concat(e.tag,"-").concat(e.tid),href:"./#/detail/".concat(e.tag,"/").concat(e.tid),onClick:E},c.a.createElement("div",{className:v.a["item-date"]},c.a.createElement("div",{className:v.a.time},e.date.substr(11,5)),c.a.createElement("div",{className:v.a.date},e.date.substr(5,5))),c.a.createElement("div",{className:v.a["item-desc"]},c.a.createElement("span",{className:v.a.tag},e.tag),e.desc))})):c.a.createElement("div",null,"\u6ca1\u6709\u6570\u636e")),c.a.createElement("div",{className:"gitter"},c.a.createElement("a",{href:"./#/note-add",className:"link btn ".concat(v.a.add)},"+"))))}},93:function(e,t,n){e.exports={"note-list":"noteList_note-list__Fam2w",add:"noteList_add__u0lP1",container:"noteList_container__1WzjR","note-item":"noteList_note-item__2tDXJ","item-date":"noteList_item-date__2d5pd",time:"noteList_time__1eDmB",date:"noteList_date__3z7yY","item-desc":"noteList_item-desc__2pf3i",tag:"noteList_tag__3sPyx",skeleton:"noteList_skeleton__3OL71","item-month":"noteList_item-month__1eENs",loading:"noteList_loading__2b5RR"}},94:function(e,t,n){e.exports={"home-tools":"Tools_home-tools__DybrX",setting:"Tools_setting__Yd_F9",wrapper:"Tools_wrapper__2jnU8",content:"Tools_content__3HLk1",item:"Tools_item__cFLmv",show:"Tools_show__NAxc5"}}}]);