(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[3],{85:function(e,t,n){e.exports={"note-detail":"styles_note-detail__A1Xhj","article-404":"styles_article-404__9jkpq",header:"styles_header__1o7G2",title:"styles_title__GgtK4",back:"styles_back__9_d1y"}},88:function(e,t,n){e.exports={"md-container":"styles_md-container__3fIh7","md-content":"styles_md-content__1BZgI","md-detail":"styles_md-detail__3E1ZT","md-preview":"styles_md-preview__eyAuJ",drag:"styles_drag__2fE19"}},89:function(e,t,n){e.exports={"pic-preview":"styles_pic-preview___6dgh",content:"styles_content__mGjqF",close:"styles_close__3QtS_",loading:"styles_loading__3N7qD","img-content":"styles_img-content__34pOG",text:"styles_text__GGazT"}},90:function(e,t,n){e.exports={catalog:"styles_catalog__hhxic",bg:"styles_bg__3QQdk",catelist:"styles_catelist__1RfRZ",close:"styles_close__21oXG",head:"styles_head__2fJ2w",desc:"styles_desc__1_ac3","cate-content":"styles_cate-content__Mg1oD","cate-item":"styles_cate-item__2jpto",active:"styles_active__I10Pt","cate-show":"styles_cate-show__23hX9"}},93:function(e,t,n){"use strict";n.r(t);var a=n(64),c=n.n(a),o=n(65),s=n(15),l=n(14),i=n(0),r=n.n(i),u=n(3),d=n(61),m=n(62),f=n(58),v=n(68),p=n(59),h=n(7),b=n(66),g=n(69),_=n(67),y=n(86),E=n.n(y),O=n(56),j=n.n(O),w=(n(87),n(60)),x=function(e){var t=e.className,n=void 0===t?"":t,a=e.onPosChange,c=(Object(w.a)(e,["className","onPosChange"]),Object(i.useRef)()),o=Object(i.useState)({posX:0,posY:0,posRight:10,posBottom:80}),u=Object(l.a)(o,2),d=u[0],m=u[1];Object(i.useEffect)((function(){return f(),function(){var e,t;null===(e=c.current)||void 0===e||e.removeEventListener("touchstart",v,{passive:!1}),null===(t=c.current)||void 0===t||t.removeEventListener("touchmove",p,{passive:!1})}}));var f=function(){var e,t;c.current=document.querySelector(".".concat(n)),null===(e=c.current)||void 0===e||e.addEventListener("touchstart",v,{passive:!1}),null===(t=c.current)||void 0===t||t.addEventListener("touchmove",p,{passive:!1})},v=function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0],n=t.pageX,a=t.pageY;m(Object(s.a)({},d,{posX:n,posY:a}))},p=function(e){e.preventDefault(),e.stopPropagation(),h(e)},h=function(e){var t=d.posX,n=d.posY,c=d.posRight,o=d.posBottom,s=e.touches[0],l=s.pageX,i=s.pageY,r=0,u=0;l>20&&l<window.innerWidth-20&&(r=l-t<0?c+Math.abs(l-t):c-Math.abs(l-t)),i>20&&i<window.innerHeight-20&&(u=i-n<0?o+Math.abs(i-n):o-Math.abs(i-n)),(l<=20||l>=window.innerWidth-20)&&(r=c),(i<=20||i>=window.innerHeight-20)&&(u=o),u=Math.round(u),r=Math.round(r),m({posX:l,posY:i,posBottom:u,posRight:r}),a({posBottom:u,posRight:r})};return r.a.createElement("div",{className:"btn ".concat(n)})},N=n(88),k=n.n(N),B=r.a.memo((function(e){var t=e.isEdit,n=e.mdtext,a=e.className,c=e.scrollTopRate,o=e.onMdRendered,s=Object(i.useRef)(),u=Object(i.useState)(!0),d=Object(l.a)(u,2),m=d[0],f=d[1],v=Object(i.useState)({posBottom:50,posRight:10}),p=Object(l.a)(v,2),h=p[0],b=p[1];Object(i.useEffect)((function(){c&&(s.current=document.querySelector(".".concat(k.a["md-content"])),s.current&&(s.current.scrollTop=s.current.scrollHeight*c))}),[c]);var g=function(e,t){var n=j.a.getLanguage(t)?t:"plaintext";return j.a.highlight(n,e,!0).value},_=Object(i.useMemo)((function(){return"container ".concat(k.a["md-container"]," ").concat(t?k.a["md-preview"]:k.a["md-detail"]," ").concat(a||"")}),[t,a]),y=Object(i.useMemo)((function(){var e="".concat(h.posBottom,"px"),n="".concat(h.posRight,"px");return t?{marginBottom:e,marginRight:n}:{}}),[t,h.posBottom,h.posRight]);return r.a.createElement("div",{className:_,style:y},t&&m&&r.a.createElement(x,{className:k.a.drag,onPosChange:function(e){var t=e.posBottom,n=e.posRight;b({posBottom:t,posRight:n})}}),(!t||m)&&r.a.createElement("section",{"data-text":t&&"\u9884\u89c8",className:k.a["md-content"],id:"md-content",dangerouslySetInnerHTML:{__html:E()(n,(function(){var e=new E.a.Renderer;e.heading=function(e,t){return"<h".concat(t,' class="heading-h').concat(t,'" id="').concat(e,'" title="').concat(e,'"><span>').concat(e,"</span></h").concat(t,">")},e.code=function(e,t){var n=encodeURI(e);return'<pre>\n        <div class="languange">\n          <span>'.concat(t,'</span>\n          <span class="copy-code" data-code="').concat(n,'">').concat('<span>\u590d\u5236\u4ee3\u7801</span>\n      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="copy" class="svg-inline--fa fa-copy fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n      <path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path>\n      </svg>','</span>\n        </div>\n        <div class="code-wrapper"><code class="').concat(t,'">').concat(g(e,t),"</code></div>\n      </pre>")},e.link=function(e,t,n){var a=t||e||"";return'<a href="'.concat(e,'" class="link" title="').concat(a,'" target="_blank">').concat(n,'\n      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="external-link-alt" class="svg-inline--fa fa-external-link-alt fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n      <path fill="currentColor" d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z">\n      </path></svg>\n      </a>')},e.image=function(e,t){return'<img src="'.concat(e,'" alt="').concat(t||"",'" class="md-img" />')},E.a.setOptions({renderer:e,highlight:g,langPrefix:"",pedantic:!1,gfm:!0,tables:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1})}(),void(null===o||void 0===o||o())))}}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("button",{className:"btn",onClick:function(){f(!m)}},m?"\u5173\u95ed\u9884\u89c8":"\u663e\u793a\u9884\u89c8"))))}),(function(e,t){return!t.isEdit||!Object.keys(t).some((function(n){return t[n]!==e[n]}))})),R=n(91),S=n(90),C=n.n(S),L=function(e){var t=e.mdtext,n=e.defaultActive,a=e.onCateClick,c=e.onGetTitle,o=Object(w.a)(e,["mdtext","defaultActive","onCateClick","onGetTitle"]),s=Object(p.a)(),u=s.scrollTop,f=s.prevScrollTop,v=Object(i.useRef)(!0),h=Object(i.useState)(!1),b=Object(l.a)(h,2),g=b[0],_=b[1],y=Object(i.useState)([]),E=Object(l.a)(y,2),O=E[0],j=E[1],x=Object(i.useState)(""),N=Object(l.a)(x,2),k=N[0],B=N[1],S=Object(i.useState)(""),L=Object(l.a)(S,2),I=L[0],T=L[1],M=Object(i.useState)([]),H=Object(l.a)(M,2),V=H[0],Y=H[1];Object(i.useEffect)((function(){I&&(document.title="MD-NOTE|".concat(I),null===c||void 0===c||c(I))}),[I]),Object(i.useEffect)((function(){G(),n&&B(n)}),[]),Object(i.useEffect)((function(){document.body.style.overflowY=g?"hidden":"auto"}),[g]),Object(i.useEffect)((function(){Y(function e(t){var n=[];return t.forEach((function(t){var a;(null===t||void 0===t||null===(a=t.child)||void 0===a?void 0:a.length)?n.push.apply(n,[t].concat(Object(R.a)(e(t.child)))):n.push(t)})),n}(O))}),[O]),Object(i.useEffect)((function(){v.current&&setTimeout(A,0)}),[u]);var A=function(){try{var e=V.reverse().find((function(e){var t=document.getElementById(e.id),n=null===t||void 0===t?void 0:t.getBoundingClientRect();return(null===n||void 0===n?void 0:n.top)<20&&(null===n||void 0===n?void 0:n.bottom)>0}));e&&(B(e.id),P(e))}catch(t){console.error(t)}},G=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);T(t.slice(2,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var s={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),o.length>0&&(s.child=o,e=e.concat(o.map((function(e){return e.id})))),n.push(s)})),j((function(){return n.filter((function(e){return Boolean(e.id)}))}))},P=function(e){var t=document.getElementById("catelog-".concat(e.id));null===t||void 0===t||t.scrollIntoView(),null===a||void 0===a||a(e.id)},X=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},q=Object(i.useCallback)((function(e,t){var n="".concat(C.a["cate-item"]," ").concat(k===e.id?C.a.active:"");return r.a.createElement("li",{key:"".concat(e.id,"-").concat(t),"data-id":e.id,id:e.header,title:e.id,className:n,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),v.current=!1,X("remove"),B(e.id),null===a||void 0===a||a(e.id),setTimeout((function(){_(!1),v.current=!0}),0)}(e)}},e.label)}),[k]),D=Object(i.useMemo)((function(){return g?C.a["cate-show"]:""}),[g]);return r.a.createElement("div",{id:"catalog",className:C.a.catalog},r.a.createElement(d.a,{className:"btn",icon:m.d,onClick:function(){X("add"),setTimeout((function(){return _(!0)}),0)}}),r.a.createElement("div",{className:C.a.bg,style:{display:g?"block":"none"}}),r.a.createElement("div",{style:{marginTop:u>50&&u>f?"0":""},className:"".concat(C.a.catelist," ").concat(D)},g&&r.a.createElement("span",{className:C.a.close,onClick:function(){_(!1),X("remove")}},r.a.createElement(d.a,{icon:m.c})),r.a.createElement("section",{className:C.a.head,title:I},"\u76ee\u5f55: ",I),r.a.createElement("section",{className:C.a["cate-content"]},O.length>0?O.map((function(e,t){var n,a;return r.a.createElement("ul",{key:e.id},q(e,t),e.child&&(null===(n=e.child)||void 0===n?void 0:n.length)>0&&r.a.createElement("ul",null,null===(a=e.child)||void 0===a?void 0:a.map((function(e,t){return q(e,t)}))))})):r.a.createElement((function(){return r.a.createElement("div",{className:C.a.desc},r.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),r.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),r.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children)},I=n(9),T=n.n(I),M=n(89),H=n.n(M),V=function(e){var t=e.show,n=e.src,a=e.alt,c=e.onClose;return Object(i.useEffect)((function(){var e=document.querySelector("#md-note"),n=document.querySelector("#catalog");return t?(e.classList.add("blur"),n.classList.add("blur"),document.body.style.overflowY="hidden"):(e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""),function(){e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""}}),[t]),T.a.createPortal(r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("section",{className:H.a["pic-preview"]},r.a.createElement("div",{className:H.a.content},r.a.createElement("button",{className:"btn ".concat(H.a.close),onClick:c},"X"),r.a.createElement("div",{className:H.a["img-content"]},n?r.a.createElement("img",{src:n,alt:a}):r.a.createElement("span",{className:H.a.loading},"\u6b63\u5728\u751f\u6210\u622a\u56fe\u3002\u3002\u3002")),r.a.createElement("div",{className:H.a.text},"\u5bfc\u51fa\u56fe\u7247\u9884\u89c8\uff0c\u53f3\u952e\u53e6\u5b58/\u957f\u6309\u4fdd\u5b58\uff01")))),document.body)},Y=n(85),A=n.n(Y);t.default=function(){var e=Object(f.a)((function(e){return[e.stickyRightStyle]})).stickyRightStyle,t=Object(v.a)((function(e){return[e.getNoteById,e.updateNoteById,e.fetchNoteByName]})),n=t.getNoteById,a=t.updateNoteById,y=t.fetchNoteByName,E=Object(u.useParams)(),O=E.tag,j=E.name,w=Object(u.useHistory)(),x=Object(u.useLocation)(),N=Object(p.a)().scrollTop,k=Object(i.useState)(!1),R=Object(l.a)(k,2),S=R[0],C=R[1],I=Object(i.useState)(""),T=Object(l.a)(I,2),M=T[0],H=T[1],Y=Object(i.useState)(),G=Object(l.a)(Y,2),P=G[0],X=G[1],q=Object(i.useState)(!1),D=Object(l.a)(q,2),z=D[0],F=D[1],Z=Object(i.useState)(),J=Object(l.a)(Z,2),Q=J[0],U=J[1],W=Object(i.useState)({show:!1,src:"",alt:"",onClose:function(){ee((function(e){return Object(s.a)({},e,{show:!1})}))}}),K=Object(l.a)(W,2),$=K[0],ee=K[1];Object(i.useEffect)((function(){te()}),[]),Object(i.useEffect)((function(){se()}),[N]);var te=function(){var e=Object(o.a)(c.a.mark((function e(){var t,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=n(j))||void 0===t?void 0:t.data)){e.next=4;break}return X(t.data),e.abrupt("return");case 4:return e.prev=4,e.next=7,y(O,j);case 7:if(0!==(null===(o=e.sent)||void 0===o?void 0:o.code)){e.next=15;break}if(!o.data.substring(0,20).includes("<!DOCTYPE html>")){e.next=11;break}return e.abrupt("return");case 11:a(j,o.data),X(o.data),e.next=18;break;case 15:console.log("\u6570\u636e\u6ca1\u6709\u4e86\uff01"),X(""),C(!0);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){document.querySelector("#md-content").onclick=function(e){ce(e),ae(e)}},ae=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".md-img");n&&window.open(n.src)},ce=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".copy-code");if(n&&n.dataset.code){var a=decodeURI(n.dataset.code);console.log(a)}},oe=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),U(e)}},se=function(){F((function(){return N>window.innerHeight}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:A.a.header},r.a.createElement("div",{className:"center-content"},r.a.createElement(d.a,{icon:m.b,className:A.a.back,title:"\u8fd4\u56de\u9996\u9875",onClick:function(){w.push("/")}}),r.a.createElement("span",{className:A.a.title,title:"\u6587\u7ae0\u6807\u9898"},"\xa0",M))),r.a.createElement("main",{className:"center-content ".concat(A.a["note-detail"])},P?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{mdtext:P,onMdRendered:function(){var e=x.hash.substr(1,x.hash.length);setTimeout((function(){oe(decodeURI(e)),ne()}),0)}}),r.a.createElement(V,$),r.a.createElement(_.a,null,r.a.createElement(L,{mdtext:P,defaultActive:Q,onCateClick:function(e){w.replace({pathname:x.pathname,hash:e})},onGetTitle:function(e){H(e)}}))):!S&&r.a.createElement(h.a,null),S&&r.a.createElement((function(){return r.a.createElement("div",{className:A.a["article-404"]},"\u6587\u7ae0\u4e0d\u89c1\u4e86\u3002\u3002\u3002")}),null),z&&r.a.createElement(g.a,{position:e})))}}}]);