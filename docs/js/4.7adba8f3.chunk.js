(this["webpackJsonpmd-note"]=this["webpackJsonpmd-note"]||[]).push([[4],{103:function(e,t,n){"use strict";n.r(t);var a=n(59),c=n.n(a),o=n(60),i=n(13),r=n(0),l=n.n(r),u=n(3),s=n(55),d=n(56),m=n(58),f=n(4),b=n(88),v=n.n(b),p=function(e){var t=e.position;return l.a.createElement("div",{className:"gitter"},l.a.createElement("div",{style:t,className:"btn ".concat(v.a.scroll2top),onClick:function(){var e=document.querySelector("#md-note");null===e||void 0===e||e.scrollIntoView()}},l.a.createElement(s.a,{icon:d.a})))},h=n(62),E=n(70),g=n(66),_=n(63),O=n(69),j=n(64),w=n(57),x=n(84),y=n.n(x),N=function(e){var t=e.mdtext,n=e.defaultActive,a=e.onCateClick,c=e.onGetTitle,o=Object(w.a)(e,["mdtext","defaultActive","onCateClick","onGetTitle"]),u=Object(_.a)().scrollTop,m=Object(r.useState)(!1),f=Object(i.a)(m,2),b=f[0],v=f[1],p=Object(r.useState)([]),h=Object(i.a)(p,2),E=h[0],g=h[1],O=Object(r.useState)(""),x=Object(i.a)(O,2),N=x[0],k=x[1],C=Object(r.useState)(""),S=Object(i.a)(C,2),L=S[0],B=S[1],I=Object(r.useState)([]),T=Object(i.a)(I,2),R=T[0],P=T[1];Object(r.useEffect)((function(){L&&(document.title+="|".concat(L),null===c||void 0===c||c(L))}),[L]),Object(r.useEffect)((function(){n&&k(n)}),[]),Object(r.useEffect)((function(){q()}),[N]),Object(r.useEffect)((function(){return Y(),function(){A()}}),[]),Object(r.useEffect)((function(){b?(document.body.style.overflowY="hidden",D(),q()):document.body.style.overflowY="auto"}),[b]),Object(r.useEffect)((function(){P(function e(t){var n=[];return t.forEach((function(t){var a;(null===t||void 0===t||null===(a=t.child)||void 0===a?void 0:a.length)?n.push.apply(n,[t].concat(Object(j.a)(e(t.child)))):n.push(t)})),n}(E))}),[E]),Object(r.useEffect)((function(){M()}),[u]);var M=function(){try{R.forEach((function(e){document.getElementById(e.id).getBoundingClientRect().top<0&&k(e.id)}))}catch(e){console.error(e)}},Y=function(){var e=[],n=[],a=t.slice(t.indexOf("\n"),t.length);B(t.slice(1,t.indexOf("\n"))),a.split("\n## ").forEach((function(t){var a=t.substring(0,t.indexOf("\n")).trim(),c=t.split("\n### ");c.shift();var o=[];c.forEach((function(e){var t=e.substring(0,e.indexOf("\n")).trim();o.push({id:t,header:"catelog-".concat(t),label:t})}));var i={id:a,header:"catelog-".concat(a),label:a,child:[]};e.push(a),o.length>0&&(i.child=o,e=e.concat(o.map((function(e){return e.id})))),n.push(i)})),g((function(){return n.filter((function(e){return Boolean(e.id)}))}))},q=function(){var e=document.getElementById("catelog-".concat(N));null===e||void 0===e||e.scrollIntoView(),null===a||void 0===a||a(N)},A=function(){return window.removeEventListener("click",F)},D=function(){return window.addEventListener("click",F)},F=function(){v(!1),A(),V("remove")},V=function(e){var t;null===(t=document.querySelector("#md-note"))||void 0===t||t.classList[e]("blur")},W=function(e){var t="".concat(y.a["cate-item"]," ").concat(N===e.id?y.a.active:"");return l.a.createElement("div",{"data-id":e.id,id:e.header,className:t,onClick:function(){return function(e){var t=document.getElementById(e.id);null===t||void 0===t||t.scrollIntoView(),V("remove"),k(e.id),null===a||void 0===a||a(e.id),setTimeout((function(){return v(!1)}),0)}(e)}},e.label)},X=Object(r.useMemo)((function(){return b?y.a["cate-show"]:""}),[b]);return l.a.createElement("div",{id:"catalog",className:y.a.catalog},l.a.createElement(s.a,{className:"btn",icon:d.h,onClick:function(){V("add"),setTimeout((function(){return v(!0)}),0)}}),l.a.createElement("div",{className:y.a.bg,style:{display:b?"block":"none"}}),l.a.createElement("div",{className:"".concat(y.a.catelist," ").concat(X),onClick:function(e){return e.stopPropagation()}},b&&l.a.createElement("span",{className:y.a.close,onClick:F},l.a.createElement(s.a,{icon:d.d})),l.a.createElement("section",{className:y.a.head,title:L},"\u76ee\u5f55: ",L),l.a.createElement("section",{className:y.a["cate-content"]},E.length>0?E.map((function(e){var t,n;return l.a.createElement("ul",{key:e.id},W(e),e.child&&(null===(t=e.child)||void 0===t?void 0:t.length)>0&&(null===(n=e.child)||void 0===n?void 0:n.map((function(e){return l.a.createElement("ul",{key:e.id},W(e))}))))})):l.a.createElement((function(){return l.a.createElement("div",{className:y.a.desc},l.a.createElement("p",null,"\u4e00\u7ea7\u6807\u9898'#'\u4e3a\u6587\u7ae0\u540d\uff0c"),l.a.createElement("p",null,"\u4e8c\u7ea7\u6807\u9898'##'\u4e3a\u4e00\u7ea7\u76ee\u5f55\uff0c"),l.a.createElement("p",null,"\u4e09\u7ea7\u6807\u9898'###'\u4e3a\u4e09\u7ea7\u76ee\u5f55"))}),null))),o.children)},k=n(9),C=n.n(k),S=n(87),L=n.n(S),B=function(e){var t=e.show,n=e.src,a=e.alt,c=e.onClode;return Object(r.useEffect)((function(){var e=document.querySelector("#md-note"),n=document.querySelector("#catalog");return t?(e.classList.add("blur"),n.classList.add("blur"),document.body.style.overflowY="hidden"):(e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""),function(){e.classList.remove("blur"),n.classList.remove("blur"),document.body.style.overflowY=""}}),[t]),C.a.createPortal(l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("section",{className:L.a["pic-preview"]},l.a.createElement("div",{className:L.a.content},l.a.createElement("button",{className:"btn ".concat(L.a.close),onClick:c},"X"),l.a.createElement("div",{className:L.a["img-content"]},n?l.a.createElement("img",{src:n,alt:a}):l.a.createElement("span",{className:L.a.loading},"\u6b63\u5728\u751f\u6210\u622a\u56fe\u3002\u3002\u3002")),l.a.createElement("div",{className:L.a.text},"\u5bfc\u51fa\u56fe\u7247\u9884\u89c8\uff0c\u53f3\u952e\u53e6\u5b58/\u957f\u6309\u4fdd\u5b58\uff01")))),document.body)},I=n(85),T=n.n(I),R=n(67);var P=function(e){e.id,e.position;var t=e.mdtext,a=Object(w.a)(e,["id","position","mdtext"]),u=Object(m.a)((function(e){return[e.theme]})).theme,f=Object(r.useState)(""),b=Object(i.a)(f,2),v=b[0],p=b[1],h=Object(r.useState)(""),E=Object(i.a)(h,2),g=E[0],_=E[1],O=Object(r.useState)(""),x=Object(i.a)(O,2),y=x[0],N=x[1],k=Object(r.useState)(!1),C=Object(i.a)(k,2),S=C[0],L=C[1],I=Object(r.useState)(!1),P=Object(i.a)(I,2),M=P[0],Y=P[1],q=Object(r.useState)(!1),A=Object(i.a)(q,2),D=A[0],F=A[1],V=Object(r.useState)(!1),W=Object(i.a)(V,2),X=W[0],z=W[1];Object(r.useEffect)((function(){var e=t.substring(0,t.indexOf("\n")).split("# ")[1];N(e||"\u5bfc\u51fa")}),[]),Object(r.useEffect)((function(){function e(){!S&&window.innerWidth>=1100&&(L(!0),Y(!1)),window.innerWidth<1100&&(L(!1),Y(!0))}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var G=function(e,t){var a=t+50;e.style.width=a+"px",setTimeout(Object(o.a)(c.a.mark((function t(){var o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={scale:1,x:0,y:0,scrollX:0,scrollY:0,width:a,useCORS:!0,backgroundColor:"dark"===u?"#232426":"#fff"},M||(o.windowWidth=a),t.next=4,Promise.resolve().then(n.t.bind(null,54,7));case 4:i=t.sent,(0,i.default)(e,o).then((function(t){p((function(){return t.toDataURL("image/png")})),e.style.width="auto"}));case 7:case"end":return t.stop()}}),t)}))),100)},K=function e(){setTimeout((function(){return L(!1)}),0),window.removeEventListener("click",e)},U=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:g,className:"export-md",download:"".concat(y,".md"),hidden:!0},"\u5bfc\u51famd\u6587\u4ef6"),l.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),e.nativeEvent.stopPropagation(),!X){z(!0);var n=window.URL,a=new Blob([t],{type:"application/text"});_(n.createObjectURL(a)),setTimeout((function(){var e;null===(e=document.querySelector(".export-md"))||void 0===e||e.click(),z(!1)}),0)}}(e)}},"\u5bfc\u51famd\u6587\u4ef6",X?"...":""),l.a.createElement("button",{className:"btn",onClick:function(e){return function(e){if(e.stopPropagation(),!D){L(!1),F(!0);var t=document.getElementById("md-content"),n=0,a=null===t||void 0===t?void 0:t.querySelectorAll("pre>code");if(a){var c=Array.from(a).map((function(e){return e.offsetWidth}));n=Math.max.apply(Math,Object(j.a)(c)),console.log("maxCodeWidth: ",n),G(t,n)}}}(e)}},"\u5bfc\u51fa\u56fe\u7247"),a.children)};return l.a.createElement("div",{className:T.a.export},l.a.createElement("button",{className:"btn ".concat(T.a.toggle),onClick:function(){L(!S),setTimeout((function(){S?window.removeEventListener("click",K):window.addEventListener("click",K)}),0)}},l.a.createElement(s.a,{icon:d.l})),M?l.a.createElement(R.a,{title:"",visible:S,onClose:function(){return L(!1)}},l.a.createElement("div",{className:T.a.tools},U())):l.a.createElement("div",{className:T.a.tools},U()),l.a.createElement(B,{show:D,src:v,alt:"".concat(y,".png"),onClode:function(){F(!1),p("")}}))},M=n(79),Y=n.n(M);t.default=function(){Object(m.a)((function(e){return[e.theme]})).theme;var e=Object(h.a)((function(e){return[e.getNoteById,e.updateNoteById,e.fetchNoteById]})),t=e.getNoteById,n=e.updateNoteById,a=e.fetchNoteById,b=Object(u.useParams)(),v=b.tag,j=b.tid,w=Object(u.useHistory)(),x=Object(u.useLocation)(),y=Object(_.a)().scrollTop,k=Object(r.useState)(""),C=Object(i.a)(k,2),S=C[0],L=C[1],B=Object(r.useState)(""),I=Object(i.a)(B,2),T=I[0],R=I[1],M=Object(r.useState)(!1),q=Object(i.a)(M,2),A=q[0],D=q[1],F=Object(r.useState)(),V=Object(i.a)(F,2),W=V[0],X=V[1],z=Object(r.useState)(),G=Object(i.a)(z,2),K=G[0],U=G[1];Object(r.useEffect)((function(){H()}),[]),Object(r.useEffect)((function(){Q()}),[y]);var H=function(){var e=Object(o.a)(c.a.mark((function e(){var o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(o=t(j))||void 0===o?void 0:o.data)){e.next=4;break}return R(o.data),e.abrupt("return");case 4:return e.prev=4,e.next=7,a(v,j);case 7:if(0!==(null===(i=e.sent)||void 0===i?void 0:i.code)){e.next=15;break}if(!i.data.substring(0,20).includes("<!DOCTYPE html>")){e.next=11;break}return e.abrupt("return");case 11:n(j,i.data),R(i.data),e.next=17;break;case 15:console.log("\u6570\u636e\u6ca1\u6709\u4e86\uff01"),R("");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),J=function(e){if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView(),U(e)}},Q=function(){D((function(){return y>window.innerHeight}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{className:Y.a.header},l.a.createElement("div",{className:"center-content"},l.a.createElement(s.a,{icon:d.c,className:Y.a.back,title:"\u8fd4\u56de\u9996\u9875",onClick:function(){w.push("/")}}),l.a.createElement("span",{title:"\u6587\u7ae0\u6807\u9898"},"\xa0",S))),l.a.createElement("main",{className:"center-content ".concat(Y.a["note-detail"])},T?l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{mdtext:T,onMdRendered:function(){var e=x.hash.substr(1,x.hash.length);setTimeout((function(){return J(decodeURI(e))}),0)}}),l.a.createElement(E.a,{onResize:function(e){X(e)}},l.a.createElement(N,{mdtext:T,defaultActive:K,onCateClick:function(e){w.replace({pathname:x.pathname,hash:e})},onGetTitle:function(e){L(e)}},l.a.createElement(P,{id:j,position:W,mdtext:T},l.a.createElement("a",{href:"./#/md-editor/".concat(v,"/").concat(j),className:"link"},l.a.createElement("button",{className:"btn"},"\u7f16\u8f91")))))):l.a.createElement(f.a,null),A&&l.a.createElement(p,{position:W})))}},79:function(e,t,n){e.exports={"note-detail":"note-detail_note-detail__300Me",header:"note-detail_header__w4hse",back:"note-detail_back__1cf7y"}},84:function(e,t,n){e.exports={catalog:"mdCatalog_catalog__3r75B",bg:"mdCatalog_bg__3VFDw",catelist:"mdCatalog_catelist__VMStr",close:"mdCatalog_close__1gQeK",head:"mdCatalog_head__3D1zK",desc:"mdCatalog_desc__2yoDB","cate-content":"mdCatalog_cate-content__2W5XA","cate-item":"mdCatalog_cate-item__3f3Dt",active:"mdCatalog_active__KtXHX","cate-show":"mdCatalog_cate-show__vLLRv"}},85:function(e,t,n){e.exports={export:"export_export__aMcjj",tools:"export_tools__2Eo1y","export-a":"export_export-a__37G93",toggle:"export_toggle__2iKaM"}},87:function(e,t,n){e.exports={"pic-preview":"index_pic-preview__1b7eL",content:"index_content__NRfaT",close:"index_close__28ht6",loading:"index_loading__gupw7","img-content":"index_img-content__3wpFr",text:"index_text__teOB-"}},88:function(e,t,n){e.exports={scroll2top:"scroll2top_scroll2top__2nPN3"}}}]);